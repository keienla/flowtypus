{"version":3,"file":"flowtypus.mjs","sources":["../node_modules/@keienla/functional/dist/curry/curry.js","../node_modules/@keienla/functional/dist/add/add.js","../node_modules/@keienla/functional/dist/transpoline/transpoline.js","../node_modules/@keienla/functional/dist/_internal/_check.js","../node_modules/@keienla/functional/dist/_internal/_and.js","../node_modules/@keienla/functional/dist/and/and.js","../node_modules/@keienla/functional/dist/freeze/freeze.js","../node_modules/@keienla/functional/dist/_internal/_reduce.js","../node_modules/@keienla/functional/dist/reduce/reduce.js","../node_modules/@keienla/functional/dist/uncurry/uncurry.js","../node_modules/@keienla/functional/dist/not/not.js","../node_modules/@keienla/functional/dist/type/type.js","../node_modules/@keienla/functional/dist/length/length.js","../node_modules/@keienla/functional/dist/sameLength/sameLength.js","../node_modules/@keienla/functional/dist/notSameLength/notSameLength.js","../node_modules/@keienla/functional/dist/_internal/_isnt.js","../node_modules/@keienla/functional/dist/isnt/isnt.js","../node_modules/@keienla/functional/dist/objectIs/objectIs.js","../node_modules/@keienla/functional/dist/_internal/_is.js","../node_modules/@keienla/functional/dist/is/is.js","../node_modules/@keienla/functional/dist/_internal/_arrayIs.js","../node_modules/@keienla/functional/dist/arrayIs/arrayIs.js","../node_modules/@keienla/functional/dist/gatherArgs/gatherArgs.js","../node_modules/@keienla/functional/dist/pipe/pipe.js","../node_modules/@keienla/functional/dist/compose/compose.js","../node_modules/@keienla/functional/dist/constant/constant.js","../node_modules/@keienla/functional/dist/_internal/_when.js","../node_modules/@keienla/functional/dist/when/when.js","../node_modules/@keienla/functional/dist/_internal/_or.js","../node_modules/@keienla/functional/dist/or/or.js","../node_modules/@keienla/functional/dist/isType/isType.js","../node_modules/@keienla/functional/dist/reduceObject/reduceObject.js","../node_modules/@keienla/functional/dist/_internal/_map.js","../node_modules/@keienla/functional/dist/mapObject/mapObject.js","../node_modules/@keienla/functional/dist/deepFreeze/deepFreeze.js","../node_modules/@keienla/functional/dist/divide/divide.js","../node_modules/@keienla/functional/dist/_internal/_filter.js","../node_modules/@keienla/functional/dist/filter/filter.js","../node_modules/@keienla/functional/dist/filterObject/filterObject.js","../node_modules/@keienla/functional/dist/flipArgs/flipArgs.js","../node_modules/@keienla/functional/dist/identity/identity.js","../node_modules/@keienla/functional/dist/isLength/isLength.js","../node_modules/@keienla/functional/dist/map/map.js","../node_modules/@keienla/functional/dist/memoize/memoize.js","../node_modules/@keienla/functional/dist/multiply/multiply.js","../node_modules/@keienla/functional/dist/partial/partial.js","../node_modules/@keienla/functional/dist/_internal/_pick.js","../node_modules/@keienla/functional/dist/pick/pick.js","../node_modules/@keienla/functional/dist/pickAll/pickAll.js","../node_modules/@keienla/functional/dist/reverseArgs/reverseArgs.js","../node_modules/@keienla/functional/dist/spreadArgs/spreadArgs.js","../node_modules/@keienla/functional/dist/substract/substract.js","../node_modules/@keienla/functional/dist/whenElse/whenElse.js","../node_modules/@keienla/functional/dist/functional.js","../src/const.ts","../src/utils/generic.ts","../src/utils/url.ts","../src/utils/dom.ts","../src/interfaces/core.ts","../src/core.ts","../src/flowtypus.ts"],"sourcesContent":["\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\n/**\r\n * Decompose a function to return another function while the user can set arguments.\r\n * @example\r\n *  function sum(x: number, y: number, z: number): number { return x + y + z };\r\n *  const sumCurry = curry(sum);\r\n *  sum(1,2,3) === sumCurry(1)(2)(3);        // true\r\n *  sum(1,2,3) === sumCurry(1,2)(3);         // true\r\n *  sum(1,2,3) === sumCurry(1)(2,3);         // true\r\n *\r\n * @param {(...args: P) => R} fn\r\n * @param {number=0} minArgsLength - When use some spread args or conditional function, this parameter will execute the fn only when this min size of args is set. Note that spread args and optional args will not be typed\r\n * @returns { Curry<P, R> }\r\n */\r\nfunction curry(fn, minArgsLength, args = []) {\r\n    const _minArgsLength = minArgsLength ? minArgsLength : 0;\r\n    return function nested(...nextArgs) {\r\n        const _args = [...args, ...nextArgs];\r\n        if (fn.length - _args.length <= 0 && _args.length >= _minArgsLength) {\r\n            return fn(..._args);\r\n        }\r\n        return curry(fn, minArgsLength, _args);\r\n    };\r\n}\r\nexports.default = curry;\r\n//# sourceMappingURL=curry.js.map","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nconst curry_1 = require(\"../curry/curry\");\r\n/**\r\n * The \"add\" function get two numbers and return the sum of those two numbers.\r\n * @example\r\n *  console.log(add(2,5))       // 7\r\n *  console.log(add(3)(4))      // 7\r\n * @param { number } num1\r\n * @param { number } num2\r\n * @returns { number }\r\n */\r\nexports.default = (0, curry_1.default)(function add(num1, num2) {\r\n    return num1 + num2;\r\n});\r\n//# sourceMappingURL=add.js.map","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\n/**\r\n * The transpoline function is used to manage recursive functions. It wrap the recursive function in a loop. Under the hood, it call the recursive function piece by piece until it no longer produces recursive calls.\r\n *\r\n * The method can be used for big recursive functions. By use them, you'll not have probleme with call stack of Javascript because it'll recursive as many method that are run one after the other, and not like one method inside one method inside one method...\r\n *\r\n * To see more about call stack: https://www.freecodecamp.org/news/understanding-the-javascript-call-stack-861e41ae61d4/\r\n *\r\n * Since few year (ES2015), Javascript implement PTC (proper tail calls). It permit to ovoid those problems of call stack. To use them you need to:\r\n *  - use 'use strict' mode\r\n *  - the recursive function must be in tail position (https://2ality.com/2015/06/tail-call-optimization.html#checking-whether-a-function-call-is-in-a-tail-position)\r\n *\r\n * But for transpoline work, you have to change the default recursive function for something similar.\r\n * @example\r\n *  // for a given number, add number below. Ex: defaultRecursive(5) = 5 + 4 + 3 + 2 + 1\r\n *  function defaultRecursive(n: number, sum = 0): number {\r\n *      if(number === 0) return sum;\r\n *      return defaultRecursive(n - 1, sum + n)\r\n *  }\r\n *  // Same method but for transpoline\r\n *  function recursiveForTranspoline(n: number, sum = 0): number {\r\n *      if(number === 0) return sum;\r\n *      // Same except the return is in a function\r\n *      return () => {\r\n *          return recursiveForTranspoline(n - 1, sum + n);\r\n *      }\r\n *  }\r\n *\r\n *  const transpolineRecursive = transpoline(recursiveForTranspoline);\r\n *\r\n * @param { (...args: T) => R } fn\r\n * @returns { (...args: T) => R }\r\n */\r\nfunction transpoline(fn) {\r\n    return function transpolined(...args) {\r\n        var result = fn(...args);\r\n        while (result instanceof Function) {\r\n            result = result();\r\n        }\r\n        return result;\r\n    };\r\n}\r\nexports.default = transpoline;\r\n//# sourceMappingURL=transpoline.js.map","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nconst transpoline_1 = require(\"./../transpoline/transpoline\");\r\nconst curry_1 = require(\"./../curry/curry\");\r\n/**\r\n * With the check method given, verify the accumulation of predicates methods with a given value\r\n * @example\r\n *  const and = check(\r\n *      (accumulator: boolean, current: boolean) => accumulator && current,\r\n *      [predicate1, predicate2],\r\n *      true,\r\n *      1,\r\n *      false\r\n *  )\r\n *  // will check all the predicates\r\n *  // if predicate(1) === false, so check will be: true && false === false => will stop and return false\r\n *  // if predicate(1) === true && predicate2(1) === true, will check true && true && true => true\r\n *  // if predicate(1) === true && predicate2(1) === false, will check true && true && false => false\r\n * @param {(accumulator: boolean, current: boolean) => boolean} checkMethod\r\n * @param {((value: T) => boolean)[]} predicates\r\n * @param {boolean} defaultResult\r\n * @param {T} value\r\n * @param {boolean |null} stopIfValue Stop if the result at each step is equal to this result\r\n */\r\nexports.default = (0, curry_1.default)(function check(checkMethod, predicates, defaultResult, value, stopIfValue) {\r\n    const checking = (checkMethod, predicates, defaultResult, value, stopIfValue = null) => {\r\n        if (!predicates || !predicates.length || defaultResult === stopIfValue)\r\n            return defaultResult;\r\n        return () => {\r\n            return checking(checkMethod, predicates.slice(1), checkMethod(defaultResult, predicates[0](value)), value, stopIfValue);\r\n        };\r\n    };\r\n    return (0, transpoline_1.default)(checking)(checkMethod, predicates, defaultResult, value, stopIfValue);\r\n});\r\n//# sourceMappingURL=_check.js.map","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nconst curry_1 = require(\"../curry/curry\");\r\nconst _check_1 = require(\"./_check\");\r\nexports.default = (0, curry_1.default)(function and(predicate1, predicate2, value) {\r\n    return (0, _check_1.default)((accumulator, current) => accumulator && current, [predicate1, predicate2], true, value, false);\r\n});\r\n//# sourceMappingURL=_and.js.map","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nconst _and_1 = require(\"./../_internal/_and\");\r\nfunction and(...args) {\r\n    return (0, _and_1.default)(...args);\r\n}\r\nexports.default = and;\r\n//# sourceMappingURL=and.js.map","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\n/**\r\n * Freeze the object. Like this it can't be changed.\r\n * @example\r\n *  const obj: { key: string } = freeze<{ key: string }>({key: 'value'});\r\n *  obj['key'] = 'test'; // doesn't work\r\n *  obj['newKey'] = 'test';  // doesn't work too\r\n *  console.log(obj['key']); // 'value'\r\n *\r\n * @param {object} value\r\n * @returns {object}\r\n */\r\nfunction freeze(value) {\r\n    return Object.freeze(value);\r\n}\r\nexports.default = freeze;\r\n//# sourceMappingURL=freeze.js.map","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports._generatorReduce = exports._objectReduce = exports._arrayReduce = void 0;\r\nconst freeze_1 = require(\"../freeze/freeze\");\r\nconst transpoline_1 = require(\"../transpoline/transpoline\");\r\nconst curry_1 = require(\"../curry/curry\");\r\nexports._arrayReduce = (0, curry_1.default)(function arrayReduce(fn, initialValue, array) {\r\n    if (!array || array.length === 0)\r\n        return initialValue;\r\n    function arrayReducer(accumulator, index, fullArray) {\r\n        if (index >= fullArray.length)\r\n            return accumulator;\r\n        return () => {\r\n            return arrayReducer(fn(accumulator, fullArray[index], index, (0, freeze_1.default)(fullArray)), index + 1, fullArray);\r\n        };\r\n    }\r\n    return (0, transpoline_1.default)(arrayReducer)(initialValue !== undefined ? initialValue : array[0], initialValue !== undefined ? 0 : 1, array);\r\n});\r\nexports._objectReduce = (0, curry_1.default)(function objectReduce(fn, initialValue, object) {\r\n    const keys = Object.keys(object);\r\n    if (!object || keys.length === 0)\r\n        return initialValue;\r\n    function objectReducer(accumulator, index, keys, object) {\r\n        if (index >= keys.length)\r\n            return accumulator;\r\n        return () => {\r\n            return objectReducer(fn(accumulator, object[keys[index]], keys[index], (0, freeze_1.default)(object)), index + 1, keys, object);\r\n        };\r\n    }\r\n    return (0, transpoline_1.default)(objectReducer)(initialValue !== undefined ? initialValue : object[keys[0]], initialValue !== undefined ? 0 : 1, keys, object);\r\n});\r\nexports._generatorReduce = (0, curry_1.default)(function generatorReduce(fn, initialValue, generator) {\r\n    if (!generator)\r\n        return initialValue;\r\n    if (initialValue === undefined) {\r\n        const generatorFirstIteration = generator.next();\r\n        if (generatorFirstIteration.done)\r\n            return initialValue;\r\n        initialValue = generatorFirstIteration.value;\r\n    }\r\n    function generatorReducer(accumulator, fnGenerator) {\r\n        const iteration = fnGenerator.next();\r\n        if (iteration.done)\r\n            return accumulator;\r\n        return () => {\r\n            return generatorReducer(fn(accumulator, iteration.value), fnGenerator);\r\n        };\r\n    }\r\n    return (0, transpoline_1.default)(generatorReducer)(initialValue, generator);\r\n});\r\n//# sourceMappingURL=_reduce.js.map","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nconst _reduce_1 = require(\"../_internal/_reduce\");\r\nfunction reduce(...args) {\r\n    return (0, _reduce_1._arrayReduce)(...args);\r\n}\r\nexports.default = reduce;\r\n//# sourceMappingURL=reduce.js.map","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nconst reduce_1 = require(\"../reduce/reduce\");\r\n/**\r\n * Transform a deep function into a one list arguments function.\r\n * @example\r\n *  function sum(x: number): (y: number) => number {\r\n *      return function add(y: number): number {\r\n *          return x + y;\r\n *      }\r\n *  }\r\n *  const uncurriedSum: (x: number, y: number) => number = uncurry(sum);\r\n *  // So\r\n *  sum(5)(8) === sum(5, 8);     // true\r\n *\r\n * @param {Function} fn Function\r\n * @returns { (...args: any[]) => any } (...args: any[]) => any\r\n */\r\nfunction uncurry(fn) {\r\n    return function uncurried(...args) {\r\n        return (0, reduce_1.default)((f, current, index) => {\r\n            if (index === args.length - 1) {\r\n                return f[0](...f[1], current);\r\n            }\r\n            if (f[0].length === [...f[1], current].length) {\r\n                return [f[0](...f[1], current), []];\r\n            }\r\n            return [f[0], [...f[1], current]];\r\n        }, [fn, []], args);\r\n    };\r\n}\r\nexports.default = uncurry;\r\n//# sourceMappingURL=uncurry.js.map","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nconst uncurry_1 = require(\"./../uncurry/uncurry\");\r\n/**\r\n * For a function that return a boolean, make a function that will return the opposite value.\r\n * @example\r\n *  function isTrue(value: boolean): boolean { return value === true };\r\n *  const isFalse: (value: boolean) => boolean = not(isTrue);\r\n *\r\n *  isTrue(false);       // return false;\r\n *  isFalse(false);      // return true;\r\n *\r\n * @param { Fn } predicate\r\n * @returns { (...args: Args) => boolean }\r\n */\r\nfunction not(predicate) {\r\n    return function negated(...args) {\r\n        const uncurried = (0, uncurry_1.default)(predicate);\r\n        return !uncurried(...args);\r\n    };\r\n}\r\nexports.default = not;\r\n//# sourceMappingURL=not.js.map","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\n/**\r\n * Return the type of the element (add array as a type)\r\n * @example\r\n *  type(undefined)     // undefined\r\n *  type(null)          // null\r\n *  type('a')           // string\r\n *  type([])            // array\r\n *  type({})            // object\r\n *  type(1)             // number\r\n *  type(() => {})      // function\r\n *  type(false)         // boolean\r\n *  type(BigInt(10))    // bigint\r\n *  type(Symbol('foo')) // symbol\r\n *  type(/a/g)          // regexp\r\n *\r\n * @param {any} value\r\n * @returns { 'string' | 'array' | 'object' | 'number' | 'function' | 'boolean' | 'undefined' | 'bigint' | 'symbol' | 'null' | 'regexp' | 'generator' | 'generatorfunction' } the type of the element\r\n */\r\nfunction type(value) {\r\n    if (value === null)\r\n        return 'null';\r\n    if (value === undefined)\r\n        return 'undefined';\r\n    return Object.prototype.toString.call(value).slice(8, -1).toLowerCase();\r\n}\r\nexports.default = type;\r\n//# sourceMappingURL=type.js.map","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nconst type_1 = require(\"./../type/type\");\r\n/**\r\n * Return the length of the element.\r\n *\r\n * If the element is an array: return the length of it.\r\n * If the element is a string: return the number of characters.\r\n * If the element is a function: return the number of arguments.\r\n * If the element is an object: return the number of keys.\r\n * If the element is a regexp: return the number of characters.\r\n * else return null\r\n *\r\n * @example\r\n *  const el1: string = 'abc';\r\n *  const el2: string[] = ['a', 'b'];\r\n *  const el3: (a: string, b: string) => any = (a: string, b: string) => { return; };\r\n *  const el4: { a: string, b: string, c: string } = { a: 'a', b: 'b', c: 'c' };\r\n *  const el5: number = 10;\r\n *  const el6: boolean = true;\r\n *  const el7: undefined = undefined;\r\n *  const el8: Symbol = Symbol('foo');\r\n *  const el9: BigInt = BigInt(10);\r\n *\r\n *  length(el1);         // 3\r\n *  length(el2);         // 2\r\n *  length(el3);         // 2\r\n *  length(el4);         // 3\r\n *  length(el5);         // null\r\n *  length(el6);         // null\r\n *  length(el7);         // null\r\n *  length(el8);         // null\r\n *  length(el9);         // null\r\n *\r\n * @param {any} el\r\n * @returns { number | null } number | null\r\n */\r\nfunction length(el) {\r\n    switch ((0, type_1.default)(el)) {\r\n        case 'array':\r\n        case 'function':\r\n        case 'string':\r\n            return el.length;\r\n        case 'object':\r\n            return Object.keys(el).length;\r\n        case 'regexp':\r\n            return el.toString().length;\r\n        default:\r\n            return null;\r\n    }\r\n}\r\nexports.default = length;\r\n//# sourceMappingURL=length.js.map","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nconst length_1 = require(\"./../length/length\");\r\nconst curry_1 = require(\"../curry/curry\");\r\n/**\r\n * Check if two elements have the same length.\r\n * If one of the element type can't have a length that can be calculated, return false.\r\n * @example\r\n *  const el1: string = 'ab';\r\n *  const el2: number[] = [1, 2];\r\n *  const el3: number = 2;\r\n *\r\n *  sameLength(el1, el1);    // true\r\n *  sameLength(el1, el2);    // true\r\n *  sameLength(el1, el3);    // false\r\n *\r\n * @param {any} el1\r\n * @param {any} el2\r\n * @returns {boolean} boolean\r\n */\r\nexports.default = (0, curry_1.default)(function sameLength(el1, el2) {\r\n    const el1Length = (0, length_1.default)(el1);\r\n    const el2Length = (0, length_1.default)(el2);\r\n    if (el1Length === null || el2Length === null)\r\n        return false;\r\n    return el1Length === el2Length;\r\n});\r\n//# sourceMappingURL=sameLength.js.map","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nconst not_1 = require(\"./../not/not\");\r\nconst sameLength_1 = require(\"./../sameLength/sameLength\");\r\n/**\r\n * Return the opposite of [sameLength()]{@link ./sameLength.ts}.\r\n */\r\nexports.default = (0, not_1.default)(sameLength_1.default);\r\n//# sourceMappingURL=notSameLength.js.map","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nconst not_1 = require(\"../not/not\");\r\nconst is_1 = require(\"../is/is\");\r\nconst curry_1 = require(\"../curry/curry\");\r\nconst uncurry_1 = require(\"../uncurry/uncurry\");\r\nexports.default = (0, curry_1.default)(function isnt(el1, el2) {\r\n    return (0, not_1.default)((0, uncurry_1.default)(is_1.default))(el1, el2);\r\n});\r\n//# sourceMappingURL=_isnt.js.map","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nconst _isnt_1 = require(\"../_internal/_isnt\");\r\nfunction isnt(...args) {\r\n    return (0, _isnt_1.default)(...args);\r\n}\r\nexports.default = isnt;\r\n//# sourceMappingURL=isnt.js.map","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nconst curry_1 = require(\"./../curry/curry\");\r\nconst notSameLength_1 = require(\"./../notSameLength/notSameLength\");\r\nconst isnt_1 = require(\"./../isnt/isnt\");\r\n/**\r\n * Check if two objects are the same. For this check the length of each object, keys and values.\r\n * @example\r\n *  const obj1: object = { a: 'a', b: 'b' };\r\n *  const obj2: object = { a: 'a', b: 'b' };\r\n *  const obj3: object = { a: 'a' };\r\n *  const obj4: object = { a: 'a', b: 'b', c: 'c' }\r\n *  const obj5: object = { a: 'b', b: 'a' };\r\n *  const obj6: object = { b: 'b', a: 'a' };\r\n *\r\n *  objectIs(obj1, obj1);        // true\r\n *  objectIs(obj1, obj2);        // true\r\n *  objectIs(obj1, obj3);        // false\r\n *  objectIs(obj1, obj4);        // false\r\n *  objectIs(obj1, obj5);        // false\r\n *  objectIs(obj1, obj6);        // false\r\n *\r\n * @param {object} object\r\n * @param {object} objectToCompare\r\n * @returns {boolean}\r\n */\r\nconst objectIs = (0, curry_1.default)(function objectIs(object, objectToCompare) {\r\n    if ((0, notSameLength_1.default)(object, objectToCompare))\r\n        return false;\r\n    if (object === objectToCompare)\r\n        return true;\r\n    const keys = Object.keys(object);\r\n    for (let key of keys) {\r\n        if (!(key in objectToCompare) ||\r\n            (0, isnt_1.default)(object[key], objectToCompare[key])) {\r\n            return false;\r\n        }\r\n    }\r\n    return true;\r\n});\r\nexports.default = objectIs;\r\n//# sourceMappingURL=objectIs.js.map","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nconst curry_1 = require(\"../curry/curry\");\r\nconst type_1 = require(\"../type/type\");\r\nconst arrayIs_1 = require(\"../arrayIs/arrayIs\");\r\nconst objectIs_1 = require(\"../objectIs/objectIs\");\r\nexports.default = (0, curry_1.default)(function is(el1, el2) {\r\n    if ((0, type_1.default)(el1) !== (0, type_1.default)(el2))\r\n        return false;\r\n    switch ((0, type_1.default)(el1)) {\r\n        case 'array':\r\n            return (0, arrayIs_1.default)(el1, el2);\r\n        case 'object':\r\n            return (0, objectIs_1.default)(el1, el2);\r\n        case 'function':\r\n        case 'regexp':\r\n            return el1.toString() === el2.toString();\r\n        default:\r\n            return el1 === el2;\r\n    }\r\n});\r\n//# sourceMappingURL=_is.js.map","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nconst _is_1 = require(\"../_internal/_is\");\r\nfunction is(...args) {\r\n    return (0, _is_1.default)(...args);\r\n}\r\nexports.default = is;\r\n//# sourceMappingURL=is.js.map","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nconst curry_1 = require(\"../curry/curry\");\r\nconst notSameLength_1 = require(\"../notSameLength/notSameLength\");\r\nconst is_1 = require(\"../is/is\");\r\nconst transpoline_1 = require(\"../transpoline/transpoline\");\r\nexports.default = (0, curry_1.default)(function arrayIs(array, arrayToCompare) {\r\n    if ((0, notSameLength_1.default)(array, arrayToCompare))\r\n        return false;\r\n    if (array === arrayToCompare)\r\n        return true;\r\n    const checkArrayIs = (result = true, index = 0) => {\r\n        if (!result)\r\n            return false;\r\n        if (index === array.length)\r\n            return result;\r\n        return () => {\r\n            return checkArrayIs((0, is_1.default)(array[index], arrayToCompare[index]), index + 1);\r\n        };\r\n    };\r\n    return (0, transpoline_1.default)(checkArrayIs)();\r\n});\r\n//# sourceMappingURL=_arrayIs.js.map","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nconst _arrayIs_1 = require(\"../_internal/_arrayIs\");\r\nfunction arrayIs(...args) {\r\n    return (0, _arrayIs_1.default)(...args);\r\n}\r\nexports.default = arrayIs;\r\n//# sourceMappingURL=arrayIs.js.map","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\n/**\r\n * For a given function, gather an array of arguments multiple arguments.\r\n * @example\r\n *  function sum(x: number, y: number): number { return x + y };\r\n *  const gatherSum: (args: [number, number]): number = gatherArgs(sum);\r\n *\r\n *  const number1: number = sum(10, 8);      // 18\r\n *  const number2: number = gatheredSum([10, 8]);  // 18\r\n *\r\n *  number1 === number2;     // true\r\n *\r\n * @param { (...args: T) => R } fn\r\n * @returns { (args: T) => R }\r\n */\r\nfunction gatherArgs(fn) {\r\n    return function gather(args) {\r\n        if (args && args.length) {\r\n            return fn(...args);\r\n        }\r\n        else {\r\n            return fn();\r\n        }\r\n    };\r\n}\r\nexports.default = gatherArgs;\r\n//# sourceMappingURL=gatherArgs.js.map","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nconst gatherArgs_1 = require(\"../gatherArgs/gatherArgs\");\r\nconst reduce_1 = require(\"../reduce/reduce\");\r\n/**\r\n * The \"**pipe**\" function execute multiple functions one after the other, and the argument of each function will be the response of the result of the previous execution function.\r\n * Start from the first function given to the last\r\n * @example\r\n *  function addOne(value: number): number { return value + 1 };\r\n *  function mulTwo(value: number): number { return value * 2 };\r\n *  function divSix(value: number): number { return value / 6 };\r\n *\r\n *  const result: number = pipe(\r\n *      addOne,\r\n *      mulTwo,\r\n *      divSix\r\n *  )(1997) // => result: 666 - The response will be divSix(mulTwo(addOne(1997))) => 1997 + 1 = 1998 => 1998 * 2 = 3996 => 3996 / 6 = 666\r\n *\r\n * @param { Function[] } fns Function[] - List of function. The first in array will be executed first\r\n * @returns { Pipe<FNS> } Return a function with as many arguments that first function given. This function will return the response type of last function given\r\n */\r\nfunction pipe(...fns) {\r\n    return function piped(...args) {\r\n        fns[0] = (0, gatherArgs_1.default)(fns[0]);\r\n        return (0, reduce_1.default)(function reduced(accumulator, fn) {\r\n            return fn(accumulator);\r\n        }, args, fns || []);\r\n    };\r\n}\r\nexports.default = pipe;\r\n//# sourceMappingURL=pipe.js.map","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nconst pipe_1 = require(\"./../pipe/pipe\");\r\n/**\r\n * The \"compose\" function execute multiple functions one after the other, and the argument of each function will be the response of the result of the previous execution function.\r\n * @example\r\n *  function addOne(value: number): number { return value + 1 };\r\n *  function mulTwo(value: number): number { return value * 2 };\r\n *  function divSix(value: number): number { return value / 6 };\r\n *\r\n *  const result: number = compose(\r\n *      divSix,\r\n *      mulTwo,\r\n *      addOne\r\n *  )(1997) // => result: 666 - The response will be divSix(mulTwo(addOne(1997))) => 1997 + 1 = 1998 => 1998 * 2 = 3996 => 3996 / 6 = 666\r\n *\r\n * @param { Function[] } fns Function[] - List of function. The last in array will be executed first\r\n * @returns { Pipe<Reverse<FNS>> } Return a function with as many arguments that last function given. This function will return the response type of first function given\r\n */\r\nfunction compose(...fns) {\r\n    return (0, pipe_1.default)(...fns.reverse());\r\n}\r\nexports.default = compose;\r\n//# sourceMappingURL=compose.js.map","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\n/**\r\n * Return a function, when executed, return the given value\r\n * @example\r\n *  const c: () => number = constant(9);\r\n *  c()      // => return 9\r\n *\r\n * @param {T} v\r\n * @returns { () => T }\r\n */\r\nfunction constant(v) {\r\n    return function value() {\r\n        return v;\r\n    };\r\n}\r\nexports.default = constant;\r\n//# sourceMappingURL=constant.js.map","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports._whenElse = exports._when = void 0;\r\nconst curry_1 = require(\"../curry/curry\");\r\nexports._when = (0, curry_1.default)(function when(predicate, fn) {\r\n    return _defaultWhenElse(predicate, fn);\r\n});\r\nexports._whenElse = (0, curry_1.default)(function whenElse(predicate, fn, elseFn) {\r\n    return _defaultWhenElse(predicate, fn, elseFn);\r\n});\r\nfunction _defaultWhenElse(predicate, fn, elseFn) {\r\n    return function conditional(arg) {\r\n        if (predicate(arg)) {\r\n            return fn(arg);\r\n        }\r\n        else if (elseFn) {\r\n            return elseFn(arg);\r\n        }\r\n        return arg;\r\n    };\r\n}\r\n//# sourceMappingURL=_when.js.map","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nconst _when_1 = require(\"./../_internal/_when\");\r\nfunction when(...args) {\r\n    return (0, _when_1._when)(...args);\r\n}\r\nexports.default = when;\r\n//# sourceMappingURL=when.js.map","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nconst curry_1 = require(\"../curry/curry\");\r\nconst _check_1 = require(\"./_check\");\r\nexports.default = (0, curry_1.default)(function or(predicate1, predicate2, value) {\r\n    return (0, _check_1.default)((a, v) => a || v, [predicate1, predicate2], false, value, true);\r\n});\r\n//# sourceMappingURL=_or.js.map","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nconst _or_1 = require(\"../_internal/_or\");\r\nfunction or(...args) {\r\n    return (0, _or_1.default)(...args);\r\n}\r\nexports.default = or;\r\n//# sourceMappingURL=or.js.map","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.isNull = exports.isUndefined = exports.isRegexp = exports.isFunction = exports.isBigint = exports.isSymbol = exports.isBoolean = exports.isNumber = exports.isString = exports.isObject = exports.isGeneratorFunction = exports.isGenerator = exports.isArray = void 0;\r\nconst type_1 = require(\"./../type/type\");\r\nconst curry_1 = require(\"../curry/curry\");\r\n/**\r\n * Check if the element given is the same type that the returnedTypes given\r\n * @param {returnedTypes} typeToTest\r\n * @param {any} element\r\n * @returns {boolean}\r\n */\r\nconst isType = (0, curry_1.default)(function isType(typeToTest, element) {\r\n    return (0, type_1.default)(element) === typeToTest;\r\n});\r\nexports.default = isType;\r\nfunction isArray(element) {\r\n    return isType('array', element);\r\n}\r\nexports.isArray = isArray;\r\nfunction isGenerator(element) {\r\n    return isType('generator', element);\r\n}\r\nexports.isGenerator = isGenerator;\r\nfunction isGeneratorFunction(element) {\r\n    return isType('generatorfunction', element);\r\n}\r\nexports.isGeneratorFunction = isGeneratorFunction;\r\nfunction isObject(element) {\r\n    return isType('object', element);\r\n}\r\nexports.isObject = isObject;\r\nfunction isString(element) {\r\n    return isType('string', element);\r\n}\r\nexports.isString = isString;\r\nfunction isNumber(element) {\r\n    return isType('number', element);\r\n}\r\nexports.isNumber = isNumber;\r\nfunction isBoolean(element) {\r\n    return isType('boolean', element);\r\n}\r\nexports.isBoolean = isBoolean;\r\nfunction isSymbol(element) {\r\n    return isType('symbol', element);\r\n}\r\nexports.isSymbol = isSymbol;\r\nfunction isBigint(element) {\r\n    return isType('bigint', element);\r\n}\r\nexports.isBigint = isBigint;\r\nfunction isFunction(element) {\r\n    return isType('function', element);\r\n}\r\nexports.isFunction = isFunction;\r\nfunction isRegexp(element) {\r\n    return isType('regexp', element);\r\n}\r\nexports.isRegexp = isRegexp;\r\nfunction isUndefined(element) {\r\n    return isType('undefined', element);\r\n}\r\nexports.isUndefined = isUndefined;\r\nfunction isNull(element) {\r\n    return isType('null', element);\r\n}\r\nexports.isNull = isNull;\r\n//# sourceMappingURL=isType.js.map","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nconst _reduce_1 = require(\"../_internal/_reduce\");\r\nfunction reduceObject(...args) {\r\n    return (0, _reduce_1._objectReduce)(...args);\r\n}\r\nexports.default = reduceObject;\r\n//# sourceMappingURL=reduceObject.js.map","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports._objectMap = exports._arrayMap = void 0;\r\nconst reduce_1 = require(\"../reduce/reduce\");\r\nconst reduceObject_1 = require(\"../reduceObject/reduceObject\");\r\nconst curry_1 = require(\"../curry/curry\");\r\nexports._arrayMap = (0, curry_1.default)(function arrayMap(fn, element) {\r\n    if (!element || element.length === 0)\r\n        return [];\r\n    return (0, reduce_1.default)(function arrayMapped(accumulator, currentValue, index, element) {\r\n        return [...accumulator, fn(currentValue, index, element)];\r\n    }, [], element);\r\n});\r\nexports._objectMap = (0, curry_1.default)(function objectMap(fn, element) {\r\n    if (!element)\r\n        return {};\r\n    const keys = Object.keys(element);\r\n    if (keys.length === 0)\r\n        return {};\r\n    return (0, reduceObject_1.default)(function objectMapped(accumulator, current, key, object) {\r\n        return Object.assign(Object.assign({}, accumulator), { [key]: fn(current, key, object) });\r\n    }, (0, reduce_1.default)(function defineDefaultObject(acc, key) { return Object.assign(Object.assign({}, acc), { [key]: undefined }); }, {}, keys), element);\r\n});\r\n// export function generatorMap<T extends Generator, R>(fn: MapGeneratorReducer<T, R>, element: T): R[] {\r\n//     if(!element) return [];\r\n//     return reduce(function generatorMapped(accumulator: R[], current: T extends Generator<infer U, any, any> ? U : any){\r\n//         return [...accumulator, fn(current)]\r\n//     }, [], element)\r\n// }\r\n// export default curry(_map);\r\n//# sourceMappingURL=_map.js.map","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nconst _map_1 = require(\"./../_internal/_map\");\r\nfunction mapObject(...args) {\r\n    return (0, _map_1._objectMap)(...args);\r\n}\r\nexports.default = mapObject;\r\n//# sourceMappingURL=mapObject.js.map","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nconst freeze_1 = require(\"../freeze/freeze\");\r\nconst when_1 = require(\"../when/when\");\r\nconst or_1 = require(\"../or/or\");\r\nconst isType_1 = require(\"../isType/isType\");\r\nconst mapObject_1 = require(\"../mapObject/mapObject\");\r\n/**\r\n * Deep Freeze the object. Like this all it's level can't be changer.\r\n * @example\r\n *  const obj: { key: any } = deepFreeze<{ key: any }>({key: { a: 0, b: 1 }});\r\n *  obj.key.a = 2; // doesn't work\r\n *  console.log(obj.key.a); // 0\r\n *\r\n * @param {object} value\r\n * @returns {object}\r\n */\r\nfunction deepFreeze(value) {\r\n    return (0, freeze_1.default)((0, mapObject_1.default)((0, when_1.default)((0, or_1.default)(isType_1.isArray, isType_1.isObject), freeze_1.default), value));\r\n}\r\nexports.default = deepFreeze;\r\n//# sourceMappingURL=deepFreeze.js.map","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nconst curry_1 = require(\"../curry/curry\");\r\n/**\r\n * The \"divide\" function get a numerator and denominator argument add make a division with those two numbers.\r\n * @example\r\n *  console.log(divide(50,100))       // 0.5\r\n * @param { number } numerator\r\n * @param { number } denominator\r\n * @returns { number }\r\n */\r\nexports.default = (0, curry_1.default)(function divide(numerator, denominator) {\r\n    if (denominator === 0)\r\n        throw new Error('Can\\'t divide by \"0\"');\r\n    return numerator / denominator;\r\n});\r\n//# sourceMappingURL=divide.js.map","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports._objectFilter = exports._arrayFilter = void 0;\r\nconst reduce_1 = require(\"../reduce/reduce\");\r\nconst reduceObject_1 = require(\"../reduceObject/reduceObject\");\r\nconst curry_1 = require(\"../curry/curry\");\r\nexports._arrayFilter = (0, curry_1.default)(function arrayFilter(fn, array) {\r\n    return (0, reduce_1.default)(function arrayFilterReducer(accumulator, current, index, array) {\r\n        if (fn(current, index, array)) {\r\n            return [...accumulator, current];\r\n        }\r\n        return accumulator;\r\n    }, [], array);\r\n});\r\nexports._objectFilter = (0, curry_1.default)(function objectFilter(fn, object) {\r\n    return (0, reduceObject_1.default)(function objectFilterReducer(accumulator, current, key, object) {\r\n        if (fn(current, key, object)) {\r\n            return Object.assign(Object.assign({}, accumulator), { [key]: object[key] });\r\n        }\r\n        return accumulator;\r\n    }, {}, object);\r\n});\r\n// export function generatorFilter<T extends Generator>(fn: FilterGeneratorReducer<T>, generator: T): FilterGeneratorReturned<T> {\r\n//     return reduce(function generatorFilterReducer(accumulator, current) {\r\n//         if(fn(current)) {\r\n//             // Need to redefined the type because with the [...accumulator] transform the array into any[]\r\n//             return [...accumulator, current] as FilterGeneratorReturned<T>;\r\n//         }\r\n//         return accumulator;\r\n//     }, [] as unknown as FilterGeneratorReturned<T>, generator)\r\n// }\r\n//# sourceMappingURL=_filter.js.map","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nconst _filter_1 = require(\"../_internal/_filter\");\r\nfunction filter(...args) {\r\n    return (0, _filter_1._arrayFilter)(...args);\r\n}\r\nexports.default = filter;\r\n//# sourceMappingURL=filter.js.map","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nconst _filter_1 = require(\"../_internal/_filter\");\r\nfunction filterObject(...args) {\r\n    return (0, _filter_1._objectFilter)(...args);\r\n}\r\nexports.default = filterObject;\r\n//# sourceMappingURL=filterObject.js.map","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\n/**\r\n * Flip the fist and the second argument. So like this the first argument become the second and the second the first. The other arguments don't move.\r\n * @example\r\n *  function calc(x: number, y: number, z: number): number { return (x / y) + z }\r\n *  const inversedCalc: (y: number, x: number, z: number) => number = flipArgs(calc);\r\n *\r\n *  const number1 = calc(10, 5, 8);          // 10\r\n *  const number2 = inversedCalc(10, 5, 8);  // 8.5\r\n *\r\n *  number1 !== number2\r\n *\r\n * @param { (a: T1, b: T2, ...args: T) => R } fn\r\n * @returns { (arg1: T2, arg2: T1, ...args: T) => R }\r\n */\r\nfunction flipArgs(fn) {\r\n    return function flipped(arg1, arg2, ...args) {\r\n        return fn(arg2, arg1, ...args);\r\n    };\r\n}\r\nexports.default = flipArgs;\r\n//# sourceMappingURL=flipArgs.js.map","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\n/**\r\n * Return the given value\r\n * @example\r\n *  identity<number>(9)      // => return 9\r\n *\r\n * @param {T} v\r\n * @returns {T}\r\n */\r\nfunction identity(v) {\r\n    return v;\r\n}\r\nexports.default = identity;\r\n//# sourceMappingURL=identity.js.map","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nconst curry_1 = require(\"./../curry/curry\");\r\nconst length_1 = require(\"./../length/length\");\r\n/**\r\n * Check if the length of the element corresponding to the given number.\r\n * @example\r\n *  const el: number[] = [0, 1, 2, 3, 4];\r\n *\r\n *  isLength(5, el);     // true\r\n *  isLength(10, 10);    // false\r\n *\r\n * @param {any} el\r\n * @param {number} lgt\r\n * @returns {boolean}\r\n */\r\nconst isLength = (0, curry_1.default)(function isLength(lgt, el) {\r\n    return (0, length_1.default)(el) === lgt;\r\n});\r\nexports.default = isLength;\r\n//# sourceMappingURL=isLength.js.map","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nconst _map_1 = require(\"./../_internal/_map\");\r\nfunction map(...args) {\r\n    return (0, _map_1._arrayMap)(...args);\r\n}\r\nexports.default = map;\r\n//# sourceMappingURL=map.js.map","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nconst is_1 = require(\"./../is/is\");\r\n/**\r\n * If the arguments have already been passed, return the cached result. Else execute the method and stock the result.\r\n *\r\n * @example\r\n *  function sum(x: number, y: number): number { return x + y };\r\n *  const memoizedSum: (x: number, y: number) => number = memoize(sum);\r\n *\r\n *  memoizedSum(3,8);        // 11 => not stocked so calcul the result\r\n *  memoizedSum(4,1);        // 5 => not stocked so calcul the result\r\n *  memoizedSum(3,8);        // 11 => the args has already been passed so calcul the result !\r\n *  memoizedSum(8,3);        // 11 => not stocked because the args are not in the same order.\r\n *\r\n * @param {Function} fn\r\n * @returns { (...args: any) => any }\r\n */\r\nfunction memoize(fn) {\r\n    let cache = {};\r\n    return function memoized(...args) {\r\n        const keys = Object.keys(cache);\r\n        for (let key of keys) {\r\n            if ((0, is_1.default)(cache[key].args, args)) {\r\n                return cache[key].value;\r\n            }\r\n        }\r\n        cache = Object.assign(Object.assign({}, cache), { [keys.length.toString()]: {\r\n                args: args,\r\n                value: fn(...args)\r\n            } });\r\n        return cache[keys.length.toString()].value;\r\n    };\r\n}\r\nexports.default = memoize;\r\n//# sourceMappingURL=memoize.js.map","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nconst curry_1 = require(\"../curry/curry\");\r\n/**\r\n * The \"multiply\" function get two numbers as argument and multiply the first with the second.\r\n * @example\r\n *  console.log(multiply(3,5))       // 15\r\n * @param { number } num1\r\n * @param { number } num2\r\n * @returns { number }\r\n */\r\nexports.default = (0, curry_1.default)(function multiply(num1, num2) {\r\n    return num1 * num2;\r\n});\r\n//# sourceMappingURL=multiply.js.map","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\n/**\r\n * Complete the x first arguments of a function.\r\n * @example\r\n *  function bigSum(x: number, y: number, z: number): number { return x + y + z }\r\n *  const add15: (z: number) => number = partial(bigSum, 10, 5);\r\n *  const myNumber: number = add15(4);   // result: 19 => the calcul will be 10 + 5 + 4\r\n *\r\n * @param {(...args: T) => R} fn\r\n * @param {U} defaultArgs\r\n * @returns { (...args: Drop<Length<U>, T>) => R } return a function. When give arguments, add it to the first argument and execute the function\r\n */\r\nfunction partial(fn, ...defaultArgs) {\r\n    return function completeArgs(...args) {\r\n        return fn(...defaultArgs, ...args);\r\n    };\r\n}\r\nexports.default = partial;\r\n//# sourceMappingURL=partial.js.map","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nconst curry_1 = require(\"../curry/curry\");\r\nexports.default = (0, curry_1.default)(function pick(obj, props = []) {\r\n    var newObj = {};\r\n    for (let key of props) {\r\n        newObj[key] = obj[key];\r\n    }\r\n    return newObj;\r\n});\r\n//# sourceMappingURL=_pick.js.map","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nconst _pick_1 = require(\"../_internal/_pick\");\r\nfunction pick(...args) {\r\n    return (0, _pick_1.default)(...args);\r\n}\r\nexports.default = pick;\r\n//# sourceMappingURL=pick.js.map","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\n/**\r\n * Will return a new object that have the same properties and values\r\n * @example\r\n *  const obj1 = { '1': 1, '2': 2, '3': 3, '4': 4, '5': 5 }\r\n *  const obj2 = pickAll(obj1); // will return { '1': 1, '2': 2, '3': 3, '4': 4, '5': 5 } as new object\r\n *\r\n * @param { A } obj the object given that will be return as a new object\r\n * @typedef { object } A the element must be an object\r\n * @returns {A} A\r\n */\r\nfunction pickAll(obj) {\r\n    return Object.assign({}, obj);\r\n}\r\nexports.default = pickAll;\r\n//# sourceMappingURL=pickAll.js.map","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\n/**\r\n * Reverse the arguments of the given function. Like this the first argument will be the last, the second the N - 1, ...\r\n * /!\\ The function with spread can't be reversed.\r\n * @example\r\n *  function divide(x: number, y: number): number { return x / y }\r\n *  const inversedDivide: (y: number, x: number) => number = reverseArgs(divide);\r\n *\r\n *  const number1 = divide(10, 5);           // 2\r\n *  const number2 = inversedDivide(10, 5);   // 0.5\r\n *\r\n *  number1 !== number2\r\n *\r\n * @param { (...args: T) => R } fn\r\n * @returns { (...args: Reverse<T>) => R }\r\n */\r\nfunction reverseArgs(fn) {\r\n    return function reversed(...args) {\r\n        return fn(...args.reverse());\r\n    };\r\n}\r\nexports.default = reverseArgs;\r\n//# sourceMappingURL=reverseArgs.js.map","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nfunction spreadArgs(fn) {\r\n    return function spread(...args) {\r\n        if (args.length) {\r\n            return fn(args);\r\n        }\r\n        else {\r\n            return fn();\r\n        }\r\n    };\r\n}\r\nexports.default = spreadArgs;\r\n//# sourceMappingURL=spreadArgs.js.map","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nconst curry_1 = require(\"../curry/curry\");\r\n/**\r\n * The \"**substract**\" function get two numbers and return the substract of the first number by the second\r\n * @example\r\n *  console.log(substract(5,3))       // 2\r\n *  console.log(substract(4)(1))      // 3\r\n * @param { number } num1\r\n * @param { number } num2\r\n * @returns { number }\r\n */\r\nexports.default = (0, curry_1.default)(function substract(num1, num2) {\r\n    return num1 - num2;\r\n});\r\n//# sourceMappingURL=substract.js.map","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nconst _when_1 = require(\"./../_internal/_when\");\r\nfunction whenElse(...args) {\r\n    return (0, _when_1._whenElse)(...args);\r\n}\r\nexports.default = whenElse;\r\n//# sourceMappingURL=whenElse.js.map","\"use strict\";\r\n// https://devdocs.io/jsdoc-tags/\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.substract = exports.spreadArgs = exports.sameLength = exports.reverseArgs = exports.reduceObject = exports.reduce = exports.pipe = exports.pickAll = exports.pick = exports.partial = exports.or = exports.objectIs = exports.notSameLength = exports.not = exports.multiply = exports.memoize = exports.mapObject = exports.map = exports.length = exports.isNull = exports.isUndefined = exports.isRegexp = exports.isFunction = exports.isBigint = exports.isSymbol = exports.isBoolean = exports.isNumber = exports.isString = exports.isObject = exports.isGeneratorFunction = exports.isGenerator = exports.isArray = exports.isType = exports.isnt = exports.isLength = exports.is = exports.identity = exports.gatherArgs = exports.freeze = exports.flipArgs = exports.filterObject = exports.filter = exports.divide = exports.deepFreeze = exports.curry = exports.constant = exports.compose = exports.arrayIs = exports.and = exports.add = void 0;\r\nexports.whenElse = exports.when = exports.type = exports.transpoline = void 0;\r\nconst add_1 = require(\"./add/add\");\r\nexports.add = add_1.default;\r\nconst and_1 = require(\"./and/and\");\r\nexports.and = and_1.default;\r\nconst arrayIs_1 = require(\"./arrayIs/arrayIs\");\r\nexports.arrayIs = arrayIs_1.default;\r\nconst compose_1 = require(\"./compose/compose\");\r\nexports.compose = compose_1.default;\r\nconst constant_1 = require(\"./constant/constant\");\r\nexports.constant = constant_1.default;\r\nconst curry_1 = require(\"./curry/curry\");\r\nexports.curry = curry_1.default;\r\nconst deepFreeze_1 = require(\"./deepFreeze/deepFreeze\");\r\nexports.deepFreeze = deepFreeze_1.default;\r\nconst divide_1 = require(\"./divide/divide\");\r\nexports.divide = divide_1.default;\r\nconst filter_1 = require(\"./filter/filter\");\r\nexports.filter = filter_1.default;\r\nconst filterObject_1 = require(\"./filterObject/filterObject\");\r\nexports.filterObject = filterObject_1.default;\r\nconst flipArgs_1 = require(\"./flipArgs/flipArgs\");\r\nexports.flipArgs = flipArgs_1.default;\r\nconst freeze_1 = require(\"./freeze/freeze\");\r\nexports.freeze = freeze_1.default;\r\nconst gatherArgs_1 = require(\"./gatherArgs/gatherArgs\");\r\nexports.gatherArgs = gatherArgs_1.default;\r\nconst identity_1 = require(\"./identity/identity\");\r\nexports.identity = identity_1.default;\r\nconst is_1 = require(\"./is/is\");\r\nexports.is = is_1.default;\r\nconst isLength_1 = require(\"./isLength/isLength\");\r\nexports.isLength = isLength_1.default;\r\nconst isnt_1 = require(\"./isnt/isnt\");\r\nexports.isnt = isnt_1.default;\r\nconst isType_1 = require(\"./isType/isType\");\r\nexports.isType = isType_1.default;\r\nconst isType_2 = require(\"./isType/isType\");\r\nObject.defineProperty(exports, \"isArray\", { enumerable: true, get: function () { return isType_2.isArray; } });\r\nObject.defineProperty(exports, \"isGenerator\", { enumerable: true, get: function () { return isType_2.isGenerator; } });\r\nObject.defineProperty(exports, \"isGeneratorFunction\", { enumerable: true, get: function () { return isType_2.isGeneratorFunction; } });\r\nObject.defineProperty(exports, \"isObject\", { enumerable: true, get: function () { return isType_2.isObject; } });\r\nObject.defineProperty(exports, \"isString\", { enumerable: true, get: function () { return isType_2.isString; } });\r\nObject.defineProperty(exports, \"isNumber\", { enumerable: true, get: function () { return isType_2.isNumber; } });\r\nObject.defineProperty(exports, \"isBoolean\", { enumerable: true, get: function () { return isType_2.isBoolean; } });\r\nObject.defineProperty(exports, \"isSymbol\", { enumerable: true, get: function () { return isType_2.isSymbol; } });\r\nObject.defineProperty(exports, \"isBigint\", { enumerable: true, get: function () { return isType_2.isBigint; } });\r\nObject.defineProperty(exports, \"isFunction\", { enumerable: true, get: function () { return isType_2.isFunction; } });\r\nObject.defineProperty(exports, \"isRegexp\", { enumerable: true, get: function () { return isType_2.isRegexp; } });\r\nObject.defineProperty(exports, \"isUndefined\", { enumerable: true, get: function () { return isType_2.isUndefined; } });\r\nObject.defineProperty(exports, \"isNull\", { enumerable: true, get: function () { return isType_2.isNull; } });\r\nconst length_1 = require(\"./length/length\");\r\nexports.length = length_1.default;\r\nconst map_1 = require(\"./map/map\");\r\nexports.map = map_1.default;\r\nconst mapObject_1 = require(\"./mapObject/mapObject\");\r\nexports.mapObject = mapObject_1.default;\r\nconst memoize_1 = require(\"./memoize/memoize\");\r\nexports.memoize = memoize_1.default;\r\nconst multiply_1 = require(\"./multiply/multiply\");\r\nexports.multiply = multiply_1.default;\r\nconst not_1 = require(\"./not/not\");\r\nexports.not = not_1.default;\r\nconst notSameLength_1 = require(\"./notSameLength/notSameLength\");\r\nexports.notSameLength = notSameLength_1.default;\r\nconst objectIs_1 = require(\"./objectIs/objectIs\");\r\nexports.objectIs = objectIs_1.default;\r\nconst or_1 = require(\"./or/or\");\r\nexports.or = or_1.default;\r\nconst partial_1 = require(\"./partial/partial\");\r\nexports.partial = partial_1.default;\r\nconst pick_1 = require(\"./pick/pick\");\r\nexports.pick = pick_1.default;\r\nconst pickAll_1 = require(\"./pickAll/pickAll\");\r\nexports.pickAll = pickAll_1.default;\r\nconst pipe_1 = require(\"./pipe/pipe\");\r\nexports.pipe = pipe_1.default;\r\nconst reduce_1 = require(\"./reduce/reduce\");\r\nexports.reduce = reduce_1.default;\r\nconst reduceObject_1 = require(\"./reduceObject/reduceObject\");\r\nexports.reduceObject = reduceObject_1.default;\r\nconst reverseArgs_1 = require(\"./reverseArgs/reverseArgs\");\r\nexports.reverseArgs = reverseArgs_1.default;\r\nconst sameLength_1 = require(\"./sameLength/sameLength\");\r\nexports.sameLength = sameLength_1.default;\r\nconst spreadArgs_1 = require(\"./spreadArgs/spreadArgs\");\r\nexports.spreadArgs = spreadArgs_1.default;\r\nconst substract_1 = require(\"./substract/substract\");\r\nexports.substract = substract_1.default;\r\nconst transpoline_1 = require(\"./transpoline/transpoline\");\r\nexports.transpoline = transpoline_1.default;\r\nconst type_1 = require(\"./type/type\");\r\nexports.type = type_1.default;\r\nconst when_1 = require(\"./when/when\");\r\nexports.when = when_1.default;\r\nconst whenElse_1 = require(\"./whenElse/whenElse\");\r\nexports.whenElse = whenElse_1.default;\r\n//# sourceMappingURL=functional.js.map","import { State } from 'interfaces/core'\r\nimport { ITransition, TransitionType } from 'interfaces/transitions'\r\n\r\n/**\r\n * Utility to parse string and create Document\r\n */\r\nexport const DOM_PARSER: DOMParser = new window.DOMParser()\r\n\r\n/**\r\n * The container of view.\r\n * If a value is set, it's the name of the current template\r\n */\r\nexport const CONTAINER_ATTR: 'data-flowtypus-container' = 'data-flowtypus-container'\r\n\r\n/**\r\n * Attribute set to the view to detect new content\r\n * The div with this attribute must be directly under the div with CONTAINER_ATTR attribute\r\n *\r\n * A value can be set and it will be the name of the template for start transitions with going from this template to ???\r\n */\r\nexport const VIEW_ATTR: 'data-flowtypus-view' = 'data-flowtypus-view'\r\n\r\n/**\r\n * The template to do the transition for.\r\n * Like this can directly choose the good transition and don't have to wait the response of the fetch to start\r\n */\r\nexport const TARGET_TEMPLATE_ATTR: 'data-flowtypus-target-template' =\r\n    'data-flowtypus-target-template'\r\n\r\n/**\r\n * The attribute set to old view while transition\r\n * Like this can detect it with selector easily && know wich block to delete\r\n */\r\nexport const OLD_VIEW_ATTR: 'data-flowtypus-old-view' = 'data-flowtypus-old-view'\r\n\r\n/**\r\n * The attribute set to new view while transition\r\n * Like this can detect it with selector easily\r\n */\r\nexport const NEW_VIEW_ATTR: 'data-flowtypus-new-view' = 'data-flowtypus-new-view'\r\n\r\n/**\r\n * The attribute to set to link wich we don't want to make transition\r\n * So the page transition will not occur and will click on link will load the page normaly\r\n */\r\nexport const DISABLED_LINK_ATTR: 'data-flowtypus-disabled' = 'data-flowtypus-disabled'\r\n\r\n/**\r\n * When a script has this attribute\r\n * Will be reloaded when updating page\r\n */\r\nexport const SCRIPTS_RELOAD_ATTR: 'data-flowtypus-reload' = 'data-flowtypus-reload'\r\n\r\n/**\r\n * List of the links of the page that have event for fetching other page and do transitions\r\n */\r\nexport const LINKS: HTMLAnchorElement[] = []\r\n\r\n/**\r\n * Object that contain :\r\n *  [key]: the url\r\n *  [value]: the response of the fetch as string\r\n *\r\n * If trying to change page and the url is stocked in as key in CACHE\r\n * so the fetch will not be called and the response will be the [value] of the [key]\r\n */\r\nexport const CACHE: Map<string, string> = new Map()\r\n\r\n/**\r\n * It contain the list of url that already be pre-fetched.\r\n * Like this don't need to pre-fetch multiple time the same url\r\n */\r\nexport const PRE_FETCHED: string[] = []\r\n\r\n/**\r\n * The list of fetching urls with response\r\n */\r\nexport const FETCHING: Map<string, Promise<Response>> = new Map()\r\n\r\n/**\r\n * The params of Flowtypus\r\n * - previousTemplate: the name of the previous template\r\n * - transitions: the list of all transitions\r\n * - state: the current state of animation\r\n * - previousURL: the URL of current position\r\n */\r\nexport const FLOW_CORE: {\r\n    previousTemplate: string | null\r\n    transitions: Map<TransitionType | `${TransitionType} (reduced)`, ITransition>\r\n    state: State\r\n    previousURL: URL | null\r\n} = {\r\n    previousTemplate: null,\r\n    transitions: new Map(),\r\n    state: 'end',\r\n    previousURL: null,\r\n}\r\n\r\n/**\r\n * The default in/out transition\r\n */\r\nexport const DEFAULT_TRANSITION: ITransition = {\r\n    out: async (params) => {\r\n        window.scrollTo({\r\n            top: 0,\r\n            behavior: 'smooth',\r\n        })\r\n        const animation = params.from.view?.animate([{ opacity: 1 }, { opacity: 0 }], {\r\n            duration: 200,\r\n            iterations: 1,\r\n            fill: 'forwards',\r\n            easing: 'ease-out',\r\n        })\r\n\r\n        animation?.play()\r\n        return animation?.finished || Promise.resolve()\r\n    },\r\n    in: async (params) => {\r\n        if (params.from.view) params.from.view.style.position = 'absolute'\r\n\r\n        const animation = params.to.view?.animate([{ opacity: 0 }, { opacity: 1 }], {\r\n            duration: 200,\r\n            iterations: 1,\r\n            fill: 'forwards',\r\n            easing: 'ease-in',\r\n        })\r\n\r\n        animation?.play()\r\n        return animation?.finished || Promise.resolve()\r\n    },\r\n}\r\n\r\n/**\r\n * The default in/out transition reduced\r\n */\r\nexport const DEFAULT_TRANSITION_REDUCED: ITransition = {\r\n    out: async () => {\r\n        return Promise.resolve()\r\n    },\r\n    in: async () => {\r\n        return Promise.resolve()\r\n    },\r\n}\r\n","import { TransitionType } from 'interfaces'\r\n\r\ntype compareResponseKey = 'missing' | 'added' | 'commun'\r\n\r\n/**\r\n * Compare two array and return an object that contain the commun elements, the missing elements and the added elements.\r\n * - The commun elements are the elements that are in the two arrays\r\n * - The missing elements are the elements that are in the old array (first arg) but that arn't in the next array (second arg)\r\n * - The added elements are the elements that are in the next array (second arg) but arn't in the old array (first arg)\r\n * @param  {K[]} old The previous elements that may be deleted\r\n * @param  {K[]} next The added elements to add\r\n * @param  {(valueA: K, valueB: K) => boolean} filter Compare the values in the arrays\r\n * @returns Record<'missing'|'added'|'commun', K[]>\r\n *\r\n * @example\r\n * const old = [0,2,8,4,6,9,7,36,874,5,13]\r\n * const new = [9,7,3,66,8,1,4,0,6,712,7485]\r\n * const response = compare(old, new)\r\n * console.log(response)\r\n * //{\r\n * //     \"missing\": [2,36,874,5,13],\r\n * //     \"commun\": [0,8,4,6,9,7],\r\n * //     \"added\": [3,66,1,712,7485]\r\n * // }\r\n */\r\nexport function compare<T extends any[] = [], K = T extends (infer U)[] ? U : any>(\r\n    old: T,\r\n    next: T,\r\n    filter: (valueA: K, valueB: K) => boolean = (valueA: K, valueB: K) => valueA === valueB\r\n): Record<compareResponseKey, K[]> {\r\n    if (!old) old = [] as unknown as T\r\n    if (!next) next = [] as unknown as T\r\n\r\n    const lessKey: compareResponseKey = old.length > next.length ? 'added' : 'missing'\r\n    const moreKey: compareResponseKey = lessKey === 'added' ? 'missing' : 'added'\r\n    const lessArr = lessKey === 'added' ? next : old\r\n\r\n    const response: Record<compareResponseKey, K[]> = {\r\n        missing: lessKey === 'added' ? [...old] : [],\r\n        commun: [],\r\n        added: lessKey === 'missing' ? [...next] : [],\r\n    }\r\n\r\n    for (let i = 0, limit = lessArr.length; i < limit; i++) {\r\n        const node = lessArr[i]\r\n        const findedIndex = response[moreKey].findIndex((n) => filter(n, node))\r\n\r\n        if (findedIndex === -1) {\r\n            response[lessKey].push(node)\r\n        } else {\r\n            response['commun'].push(node)\r\n            response[moreKey].splice(findedIndex, 1)\r\n        }\r\n    }\r\n\r\n    return response\r\n}\r\n\r\n/**\r\n * For each template given create all animations transitions possible\r\n * @param  {string} currentTemplate The template of start of the transition\r\n * @param  {string} targetTemplate The template of destination of the transition\r\n * @param  {boolean=true} replaceStart If value === true and currentTemplate or targetTemplate !== '*' will create transitions by remplacing those args by a '*'\r\n * @returns TransitionType[]\r\n */\r\nexport function constructPossibleTransitions(\r\n    currentTemplate?: string | null,\r\n    targetTemplate?: string | null,\r\n    replaceStart: boolean = true\r\n): TransitionType[] {\r\n    if (!currentTemplate) currentTemplate = '*'\r\n    if (!targetTemplate) targetTemplate = '*'\r\n\r\n    const reduced: string = !!window?.matchMedia?.('(prefers-reduced-motion: reduce)').matches\r\n        ? ' (reduced)'\r\n        : ''\r\n\r\n    const response: TransitionType[] = [\r\n        `${currentTemplate} => ${targetTemplate}${reduced}`,\r\n        `${targetTemplate} <= ${currentTemplate}${reduced}`,\r\n        `${currentTemplate} <=> ${targetTemplate}${reduced}`,\r\n    ]\r\n\r\n    if (currentTemplate !== targetTemplate) {\r\n        response.push(`${targetTemplate} <=> ${currentTemplate}${reduced}`)\r\n    }\r\n\r\n    if (targetTemplate !== '*' && replaceStart) {\r\n        response.push(...constructPossibleTransitions(currentTemplate, '*', false))\r\n    }\r\n    if (currentTemplate !== '*' && replaceStart) {\r\n        response.push(...constructPossibleTransitions('*', targetTemplate, false))\r\n    }\r\n    if (currentTemplate !== '*' && targetTemplate !== '*' && replaceStart) {\r\n        response.push(...constructPossibleTransitions('*', '*', false))\r\n    }\r\n\r\n    return response\r\n}\r\n","/**\r\n * Transform a given string to URL Element if possible\r\n * If there is no origin, will take the parameter origin and if not set will use as reference the current page url\r\n * @param  {string|URL|null} url\r\n * @param  {string} origin?\r\n * @returns URL|null\r\n */\r\nexport function transformToURL(url: string | URL | null, origin?: string): URL | null {\r\n    if (!url) return null\r\n\r\n    if (url instanceof URL) return url\r\n\r\n    try {\r\n        return new URL(url)\r\n    } catch (err) {\r\n        try {\r\n            return new URL(url, origin || window.location.href)\r\n        } catch (e) {\r\n            return null\r\n        }\r\n    }\r\n}\r\n\r\n/**\r\n * Get the URL of the current window locaction\r\n * @returns URL|null\r\n */\r\nexport function getCurrentURL(): URL | null {\r\n    return transformToURL(window.location.href)\r\n}\r\n\r\n/**\r\n * Check if the given element exist and is instance of URL\r\n * @param  {URL|null} url\r\n * @returns boolean\r\n */\r\nexport function isURL(url: URL | null | any): url is URL {\r\n    return url instanceof URL\r\n}\r\n\r\n/**\r\n * Check if two given url have the same origin\r\n * @param  {URL|string|null} url1\r\n * @param  {URL|string|null} url2\r\n * @returns boolean\r\n */\r\nexport function isSameOrigin(url1: URL | string | null, url2: URL | string | null): boolean {\r\n    url1 = transformToURL(url1)\r\n    url2 = transformToURL(url2)\r\n\r\n    return isURL(url1) && isURL(url2) && url1.origin === url2.origin\r\n}\r\n\r\n/**\r\n * Check if the two urls exist and if the paths are same\r\n * @param  {URL|string|null} url1\r\n * @param  {URL|string|null} url2\r\n * @returns boolean\r\n */\r\nexport function isSamePath(url1: URL | string | null, url2: URL | string | null): boolean {\r\n    url1 = transformToURL(url1)\r\n    url2 = transformToURL(url2)\r\n\r\n    return (\r\n        isURL(url1) && isURL(url2) && url1.pathname === url2.pathname && url1.search === url2.search\r\n    )\r\n}\r\n\r\n/**\r\n * Find the direct A or A parent if exist of a given HTMLElement\r\n * @param  {HTMLElement|null} el\r\n * @returns HTMLAnchorElement\r\n */\r\nexport function findTargetAnchor(el?: HTMLElement | null): HTMLAnchorElement | null {\r\n    if (!el) return null\r\n    if (el.tagName === 'A') return el as HTMLAnchorElement\r\n    if (el.parentElement) return findTargetAnchor(el.parentElement)\r\n    return null\r\n}\r\n","import {\r\n    CONTAINER_ATTR,\r\n    DISABLED_LINK_ATTR,\r\n    DOM_PARSER,\r\n    NEW_VIEW_ATTR,\r\n    OLD_VIEW_ATTR,\r\n    PRE_FETCHED,\r\n    SCRIPTS_RELOAD_ATTR,\r\n    TARGET_TEMPLATE_ATTR,\r\n    VIEW_ATTR,\r\n} from '../const'\r\nimport { compare } from './generic'\r\nimport { isSameOrigin, transformToURL } from './url'\r\nimport { curry, pipe } from '@keienla/functional'\r\n\r\n/**\r\n * Parse the html string and return a document\r\n * @param  {string} html\r\n * @returns Document\r\n */\r\nexport function getParsedHTML(html: string | Document): Document {\r\n    if (html instanceof Document) return html\r\n    return DOM_PARSER.parseFromString(\r\n        typeof html === 'string' ? html : (html as any).toString(),\r\n        'text/html'\r\n    )\r\n}\r\n\r\n/**\r\n * Get the container\r\n * i.e the element with param data-flowtypus-container\r\n * if no exist return body\r\n * @param  {Document} document\r\n * @returns HTMLElement|null\r\n */\r\nexport function getContainer(document: Document): HTMLElement | null {\r\n    if (!document || !(document instanceof Document)) return null\r\n    return document.querySelector(`[${CONTAINER_ATTR}]`) || null\r\n}\r\n\r\n/**\r\n * Get the view that is not the oldView\r\n * i.e the element with param data-flowtypus-view\r\n * if no exist return body\r\n * @param  {Document} document\r\n * @returns HTMLElement|null\r\n */\r\nexport function getView(document: Document): HTMLElement | null {\r\n    return (\r\n        (Array.from(getContainer(document)?.children || []).filter(\r\n            (el) => el.hasAttribute(VIEW_ATTR) && !el.hasAttribute(OLD_VIEW_ATTR)\r\n        )[0] as HTMLElement) || null\r\n    )\r\n}\r\n\r\n/**\r\n * Extract the template name of the given document if there is one\r\n * To add one add a value to the data-flowtypus-container of the page\r\n * @param  {Document} html\r\n * @returns string|null\r\n */\r\nexport function getTemplateName(document: Document): string | null {\r\n    const view = getView(document)\r\n    return view?.getAttribute?.(VIEW_ATTR) || null\r\n}\r\n\r\n/**\r\n * Check if the given HTMLElement have the 'data-flowtypus-target-template' attribute\r\n * If true return it's value\r\n * @param  {HTMLAnchorElement|null} el\r\n * @returns string|null\r\n */\r\nexport function getTargetTemplateName(el: HTMLElement | null): string | null {\r\n    if (!el || !(el instanceof HTMLElement)) return null\r\n\r\n    if (el.hasAttribute(TARGET_TEMPLATE_ATTR)) return el.getAttribute(TARGET_TEMPLATE_ATTR) || null\r\n    return null\r\n}\r\n\r\n/**\r\n * Replace the value of attribute given in the currentElement with the value in the newElement given\r\n * @param  {Element} newELement The element with the new attr value\r\n * @param  {Element} currentElement The element with the old attr value\r\n * @param  {string} attr The key attribute to replace\r\n * @param  {string} defaultValue The default value if newElement doesn't have attr value\r\n * @returns void\r\n */\r\nexport function updateAttr(\r\n    newELement: Element,\r\n    currentElement: Element,\r\n    attr: string,\r\n    defaultValue: string = ''\r\n): void {\r\n    if (\r\n        !!currentElement &&\r\n        currentElement.getAttribute(attr) !== newELement?.getAttribute?.(attr)\r\n    ) {\r\n        currentElement.setAttribute(attr, newELement?.getAttribute?.(attr) || defaultValue)\r\n    }\r\n}\r\n\r\n/**\r\n * Replace the actual lang/dir of the page with the lang/dir of the new page\r\n * @param  {Document} newDocument The document to get the informations/content\r\n * @param  {Document} currentDocument The default document to update\r\n * @returns Document The currentDocument modified\r\n */\r\nexport const updateLang = curry(function updateLang(\r\n    newDocument: Document,\r\n    currentDocument: Document\r\n): Document {\r\n    const currentElement: Element = currentDocument.children[0]\r\n    const newElement: Element = newDocument.children[0]\r\n\r\n    updateAttr(newElement, currentElement, 'lang')\r\n    updateAttr(newElement, currentElement, 'dir', 'ltr')\r\n\r\n    return currentDocument\r\n})\r\n\r\n/**\r\n * - Remove all element in head of previous page that are not in current head\r\n * - Add all elements in head in the new page\r\n * - Update the language if nedded\r\n * @param  {Document} newDocument The document to get the informations/content\r\n * @param  {Document} currentDocument The default document to update\r\n * @returns Document The currentDocument modified\r\n */\r\nexport const mergeHead = curry(function mergeHead(\r\n    newDocument: Document,\r\n    currentDocument: Document\r\n): Document {\r\n    // Get the element in head in currentDocument\r\n    const currentHead = Array.from(currentDocument.head.children)\r\n    // Get the element in head in newDocument\r\n    const nextHead = Array.from(newDocument.head.children)\r\n\r\n    // Extract all element to remove add\r\n    const { missing, added } = compare(currentHead, nextHead, (a: Element, b: Element) =>\r\n        a.isEqualNode(b)\r\n    )\r\n\r\n    // Remove all elements in head that are not in the new document head\r\n    missing.forEach((node) => node.remove())\r\n    // Add all the elements that are new in the new document\r\n    currentDocument.head.append(...added)\r\n    // Run the scripts\r\n    added\r\n        .filter((el) => el.tagName === 'SCRIPT')\r\n        .forEach((el: HTMLScriptElement) => replaceAndRunScript(el))\r\n\r\n    return currentDocument\r\n})\r\n\r\n/**\r\n * Add the view of newDocument just after the view of currentDocument\r\n * @param  {Document} newDocument The document to get the informations/content\r\n * @param  {Document} currentDocument The default document to update\r\n * @returns Document The currentDocument modified\r\n */\r\nexport const setNewContent = curry(function setNewContent(\r\n    newDocument: Document,\r\n    currentDocument: Document\r\n): Document {\r\n    let fullContainer = getContainer(currentDocument)\r\n\r\n    if (!fullContainer) {\r\n        throw new Error('no container with attribute \"' + CONTAINER_ATTR + '\"')\r\n    }\r\n\r\n    let currentContent = getView(currentDocument)\r\n    let newContent = getView(newDocument)\r\n\r\n    if (!currentContent) throw new Error('No view with attribute')\r\n    if (!currentContent || !newContent) throw new Error('No content')\r\n\r\n    // Set attributes to views to distinct easily\r\n    newContent.setAttribute(NEW_VIEW_ATTR, 'true')\r\n    currentContent.setAttribute(OLD_VIEW_ATTR, 'true')\r\n\r\n    // Set the new content after current content\r\n    if (currentContent.nextSibling) {\r\n        fullContainer.insertBefore(newContent, currentContent.nextSibling)\r\n    } else {\r\n        fullContainer.append(newContent)\r\n    }\r\n\r\n    return currentDocument\r\n})\r\n\r\n/**\r\n * Remove the view with OLD_VIEW_ATTR\r\n * @param  {Document} doc\r\n * @returns Document\r\n */\r\nexport function deleteOldContent(doc: Document): Document {\r\n    // Remove old content\r\n    const todoRemove = doc.querySelector(`[${OLD_VIEW_ATTR}]`)\r\n    todoRemove?.remove()\r\n\r\n    // Remove attribute in new content\r\n    const newView = doc.querySelector(`[${NEW_VIEW_ATTR}]`)\r\n    newView?.removeAttribute(NEW_VIEW_ATTR)\r\n\r\n    return doc\r\n}\r\n\r\n/**\r\n * Get all links that can make a transition for transition page with same origin\r\n * i.e links with no target or target !== _self\r\n * & links without DISABLED_LINK_ATTR\r\n * & links with href can only navigation in page with ids\r\n * @param  {Document?} dom\r\n * @returns HTMLAnchorElement\r\n */\r\nexport function getNavigationLinks(dom: Document = document): HTMLAnchorElement[] {\r\n    return Array.from<HTMLAnchorElement>(\r\n        dom.querySelectorAll(`a:not([${DISABLED_LINK_ATTR}]):not([href^=\"#\"])`)\r\n    ).filter((link) => {\r\n        if (!isSameOrigin(link.getAttribute('href'), window.location.href)) return false\r\n        if (!link.hasAttribute('target')) return true\r\n        return link.getAttribute('target') === '_self'\r\n    })\r\n}\r\n\r\n/**\r\n * Get all links in head and body that will be reloaded when updating page\r\n * Those links can be selected because have attr SCRIPTS_RELOAD_ATTR\r\n * @param  {Document?} dom\r\n * @returns HTMLScriptElement\r\n */\r\nexport function getScriptsToReload(dom: Document = document): HTMLScriptElement[] {\r\n    // Get scripts to reload in Head\r\n    const headScripts: NodeListOf<HTMLScriptElement> = dom.head.querySelectorAll(\r\n        `script[${SCRIPTS_RELOAD_ATTR}]`\r\n    )\r\n    // Get scripts to reload in body\r\n    const bodyScripts: NodeListOf<HTMLScriptElement> = dom.body.querySelectorAll(\r\n        `script[${SCRIPTS_RELOAD_ATTR}]`\r\n    )\r\n\r\n    return [...Array.from(headScripts), ...Array.from(bodyScripts)]\r\n}\r\n\r\n/**\r\n * ! Can't test with JEST, have to do it in Cypress\r\n * Replace the script by the exact same script (but like this other reference) and rerun it\r\n *\r\n * @param  {HTMLScriptElement} oldScript The script to replace\r\n */\r\nexport function replaceAndRunScript(oldScript: HTMLScriptElement): void {\r\n    const newScript = document.createElement('script')\r\n    const attrs = Array.from(oldScript.attributes)\r\n    for (const { name, value } of attrs) {\r\n        newScript[name] = value\r\n    }\r\n    newScript.append(oldScript.textContent || '')\r\n    oldScript.replaceWith(newScript)\r\n}\r\n\r\n/**\r\n * Create a link element to prefetch the given url\r\n * When the url is given, save it to not redo the prefetching and recreate the same link element\r\n * @param  {string} url\r\n * @param  {Document?} dom\r\n */\r\nexport function prefetchUrl(url: string | URL | null, dom: Document = document): void {\r\n    url = transformToURL(url)\r\n\r\n    if (!url?.href || PRE_FETCHED.indexOf(url.href) !== -1) return void 0\r\n\r\n    const linkEl: HTMLLinkElement = dom.createElement('link')\r\n    linkEl.setAttribute('rel', 'prefetch')\r\n    linkEl.setAttribute('href', url.href)\r\n    linkEl.setAttribute('as', 'document')\r\n\r\n    dom.head.appendChild(linkEl)\r\n\r\n    PRE_FETCHED.push(url.href)\r\n}\r\n\r\n/**\r\n * @param  {Document} newDocument The document to get the informations/content\r\n * @param  {Document} currentDocument The default document to update\r\n * @returns Document The currentDocument modified\r\n */\r\nexport const updateDOMForInTransitionPage = curry(function updateDOMForInTransitionPage(\r\n    newDocument: Document,\r\n    currentDocument: Document\r\n): Document | never {\r\n    return pipe(\r\n        setNewContent(newDocument),\r\n        updateLang(newDocument),\r\n        mergeHead(newDocument)\r\n    )(currentDocument)\r\n})\r\n","export interface ILoadingProgress {\r\n    progress: number\r\n    fullBytesLength: number\r\n    bytesReceived: number\r\n    cache: boolean\r\n    done: boolean\r\n}\r\n\r\nexport class LoadingProgressEvent extends Event {\r\n    detail: ILoadingProgress\r\n\r\n    constructor(detail: ILoadingProgress) {\r\n        super('flow:loading:progress')\r\n\r\n        this.detail = detail\r\n    }\r\n}\r\n\r\nexport type State = 'error' | 'in' | 'out' | 'end'\r\n\r\nexport interface IProperties {\r\n    view: HTMLElement | null\r\n    template: string | null\r\n    url: URL | string | null\r\n}\r\n\r\nexport interface ITransitionOutEventConstructor extends EventInit {\r\n    from: IProperties\r\n    to: Pick<IProperties, 'template' | 'url'>\r\n    link: HTMLAnchorElement | null\r\n    transitionKey: string | null\r\n    container: HTMLElement | null\r\n}\r\n\r\nexport class TransitionOutEvent extends Event {\r\n    from: ITransitionOutEventConstructor['from']\r\n    to: ITransitionOutEventConstructor['to']\r\n    link: ITransitionOutEventConstructor['link']\r\n    transitionKey: ITransitionOutEventConstructor['transitionKey']\r\n    container: ITransitionOutEventConstructor['container']\r\n\r\n    constructor(init: ITransitionOutEventConstructor) {\r\n        super('flow:transition:out')\r\n\r\n        this.from = init.from\r\n        this.to = init.to\r\n        this.link = init.link\r\n        this.transitionKey = init.transitionKey\r\n        this.container = init.container\r\n    }\r\n}\r\n\r\nexport interface ITransitionInEventConstructor extends EventInit {\r\n    from: IProperties\r\n    to: IProperties & { document: Document; container: HTMLElement | null }\r\n    link: HTMLAnchorElement | null\r\n    transitionKey: string | null\r\n    container: HTMLElement | null\r\n}\r\n\r\nexport class TransitionInEvent extends Event {\r\n    from: ITransitionInEventConstructor['from']\r\n    to: ITransitionInEventConstructor['to']\r\n    link: ITransitionInEventConstructor['link']\r\n    transitionKey: ITransitionInEventConstructor['transitionKey']\r\n    container: ITransitionInEventConstructor['container']\r\n\r\n    constructor(init: ITransitionInEventConstructor) {\r\n        super('flow:transition:in')\r\n\r\n        this.from = init.from\r\n        this.to = init.to\r\n        this.link = init.link\r\n        this.transitionKey = init.transitionKey\r\n        this.container = init.container\r\n    }\r\n}\r\n\r\nexport interface ITransitionEndEventConstructor extends EventInit {\r\n    from: IProperties\r\n    to: (IProperties & { document?: Document; container?: HTMLElement | null }) | null\r\n    link: HTMLAnchorElement | null\r\n    transitionKey: string | null\r\n    container: HTMLElement | null\r\n    error: null | any\r\n}\r\n\r\nexport class TransitionEndEvent extends Event {\r\n    from: ITransitionEndEventConstructor['from']\r\n    to:\r\n        | (ITransitionEndEventConstructor['to'] & {\r\n              document?: Document\r\n              container?: HTMLElement | null\r\n          })\r\n        | null\r\n    link: ITransitionEndEventConstructor['link']\r\n    transitionKey: ITransitionEndEventConstructor['transitionKey']\r\n    container: ITransitionEndEventConstructor['container']\r\n    error: ITransitionEndEventConstructor['error']\r\n\r\n    constructor(init: ITransitionEndEventConstructor) {\r\n        super('flow:transition:end')\r\n\r\n        this.from = init.from\r\n        this.to = init.to\r\n        this.link = init.link\r\n        this.transitionKey = init.transitionKey\r\n        this.container = init.container\r\n        this.error = init.error\r\n    }\r\n}\r\n","import { divide, map, pipe } from '@keienla/functional'\r\nimport {\r\n    CACHE,\r\n    FETCHING,\r\n    FLOW_CORE,\r\n    LINKS,\r\n    DEFAULT_TRANSITION,\r\n    DEFAULT_TRANSITION_REDUCED,\r\n} from './const'\r\nimport {\r\n    deleteOldContent,\r\n    getContainer,\r\n    getView,\r\n    getParsedHTML,\r\n    getTargetTemplateName,\r\n    getTemplateName,\r\n    updateDOMForInTransitionPage,\r\n    getNavigationLinks,\r\n    getScriptsToReload,\r\n    replaceAndRunScript,\r\n    prefetchUrl,\r\n} from './utils/dom'\r\nimport {\r\n    LoadingProgressEvent,\r\n    ITransitionEndEventConstructor,\r\n    ITransitionInEventConstructor,\r\n    ITransitionOutEventConstructor,\r\n    TransitionEndEvent,\r\n    TransitionInEvent,\r\n    TransitionOutEvent,\r\n} from './interfaces/core'\r\nimport {\r\n    ITransition,\r\n    TransitionFnIn,\r\n    TransitionFnOut,\r\n    TransitionType,\r\n} from './interfaces/transitions'\r\nimport { constructPossibleTransitions } from './utils/generic'\r\nimport {\r\n    findTargetAnchor,\r\n    getCurrentURL,\r\n    isSameOrigin,\r\n    isSamePath,\r\n    transformToURL,\r\n} from './utils/url'\r\n\r\n/**\r\n * Clear all elements in cache\r\n * @returns void\r\n */\r\nexport function clearAllCache(): void {\r\n    CACHE.clear()\r\n}\r\n\r\n/**\r\n * Clear the cache for the given url\r\n * @param  {string|URL|null} url\r\n * @returns boolean\r\n */\r\nexport function clearCacheForUrl(url: string | URL | null): boolean {\r\n    url = transformToURL(url)\r\n\r\n    if (!url) return true\r\n\r\n    if (!CACHE.has(url.href)) return true\r\n\r\n    return CACHE.delete(url.href)\r\n}\r\n\r\n/**\r\n * Add a transition to the flow\r\n * @param  {TransitionType} key\r\n * @param  {TransitionFnIn} transitionIn\r\n * @param  {TransitionFnOut} transitionOut\r\n * @param  {boolean} reducedMotion If use this animation when option reduced-motion is on\r\n */\r\nexport function setTransition(\r\n    key: TransitionType,\r\n    transitionOut: TransitionFnOut,\r\n    transitionIn: TransitionFnIn,\r\n    reducedMotion: boolean = false\r\n) {\r\n    // Reformat the key to remove all unacessary spaces\r\n    const transitionKey: TransitionType = key\r\n        .split(' ')\r\n        .filter((k) => !!k)\r\n        .concat(reducedMotion ? ['(reduced)'] : [])\r\n        .join(' ') as TransitionType\r\n    FLOW_CORE.transitions.set(transitionKey, {\r\n        in: transitionIn,\r\n        out: transitionOut,\r\n    })\r\n}\r\n\r\nsetTransition('* <=> *', DEFAULT_TRANSITION.out, DEFAULT_TRANSITION.in)\r\n\r\nsetTransition('* <=> *', DEFAULT_TRANSITION_REDUCED.out, DEFAULT_TRANSITION_REDUCED.in, true)\r\n\r\n/**\r\n * Ask to flow to change page\r\n * It will occur if the given url is not the same as the current url\r\n *\r\n * If an Event is passed, will prevent the default behavior of the event and stop the propagation\r\n * @param  {URL|null} url The destination url\r\n * @param  {string|null|undefined} template The destination template if knowned\r\n * @param  {MouseEvent} event?\r\n * @returns  boolean\r\n */\r\nexport function goToPage(\r\n    url: URL | string | null,\r\n    template?: string | null,\r\n    event?: MouseEvent\r\n): boolean {\r\n    // If running can't change page\r\n    if (FLOW_CORE.state !== 'end' && FLOW_CORE.state !== 'error') {\r\n        if (event) {\r\n            event.preventDefault()\r\n        }\r\n        return false\r\n    }\r\n\r\n    const currentURL = getCurrentURL()\r\n\r\n    if (!currentURL) return false\r\n\r\n    if (typeof url === 'string') url = transformToURL(url)\r\n\r\n    if (\r\n        !!url &&\r\n        isSameOrigin(url, currentURL) &&\r\n        (event ? !(event.metaKey || event.ctrlKey) : true)\r\n    ) {\r\n        if (event) {\r\n            event.preventDefault()\r\n        }\r\n\r\n        if (!isSamePath(url, currentURL)) {\r\n            history?.pushState?.({ template }, '', url.href)\r\n            changePage(\r\n                { state: { template } },\r\n                event ? findTargetAnchor(event?.target as HTMLElement) : null\r\n            )\r\n        }\r\n\r\n        return true\r\n    } else if (!!url && !isSameOrigin(url, currentURL)) {\r\n        window.location.href = url.href\r\n    }\r\n\r\n    return false\r\n}\r\n\r\n/**\r\n * Run script with attr \"data-flowtypus-reload\" when change page\r\n * Because if update page and script is keeped, it will not be reload\r\n */\r\nexport function rerunScripts(): void {\r\n    pipe(getScriptsToReload, map(replaceAndRunScript))(document)\r\n}\r\n\r\n/**\r\n * Initialize the event for the flow and return some control methods\r\n */\r\nexport function flowtypus(): {\r\n    back: () => boolean\r\n    forward: () => boolean\r\n    setTransition: typeof setTransition\r\n    goToPage: (url: string | URL | null, template?: string | null) => void\r\n    rerunScript: typeof replaceAndRunScript\r\n    rerunScripts: typeof rerunScripts\r\n    clearAllCache: typeof clearAllCache\r\n    clearCacheForUrl: typeof clearCacheForUrl\r\n} {\r\n    window.onload = () => {\r\n        selectLinksAndAddEvents()\r\n        updateHistoryWithCurrentTemplate()\r\n    }\r\n\r\n    window.addEventListener('popstate', changePage)\r\n    FLOW_CORE.previousTemplate = getTemplateName(document)\r\n    FLOW_CORE.previousURL = getCurrentURL()\r\n\r\n    return {\r\n        back: () => {\r\n            if (!history) return false\r\n            history.back?.()\r\n            return true\r\n        },\r\n        clearAllCache,\r\n        clearCacheForUrl,\r\n        forward: () => {\r\n            if (!history) return false\r\n            history.forward?.()\r\n            return true\r\n        },\r\n        goToPage: (url: string | URL | null, template?: string | null) => {\r\n            return goToPage(url, template)\r\n        },\r\n        rerunScript: replaceAndRunScript,\r\n        rerunScripts,\r\n        setTransition,\r\n    }\r\n}\r\n\r\n/**\r\n * When click on a link make the transition if possible\r\n * i.e if the link is in the same origin and not the same path\r\n * @param  {HTMLAnchorElement} link\r\n * @returns (event: MouseEvent) => void\r\n */\r\nfunction clickLink(link: HTMLAnchorElement): (event: MouseEvent) => void {\r\n    return (event: MouseEvent): void => {\r\n        if (!link) return void 0\r\n\r\n        const aURL = transformToURL(link.getAttribute('href'))\r\n        const targetTemplate: string | null = getTargetTemplateName(link)\r\n\r\n        goToPage(aURL, targetTemplate, event)\r\n    }\r\n}\r\n\r\n/**\r\n * Preload the page like this if click on link the destination page will load faster\r\n * @param  {HTMLAnchorElement} link\r\n * @returns () => void\r\n */\r\nfunction prefetchLink(link: HTMLAnchorElement): () => void {\r\n    return (): void => {\r\n        if (!link) return void 0\r\n\r\n        prefetchUrl(link.href)\r\n        link.removeEventListener('mouseenter', prefetchLink(link))\r\n        link.removeEventListener('focus', prefetchLink(link))\r\n    }\r\n}\r\n\r\n/**\r\n * Update content for currentURL\r\n * If previous url/template saved use it to do transition\r\n * @param  {{state?:{template?:string|null}}} {state}\r\n * @param  {HTMLAnchorElement|null=null} link\r\n * @returns Promise\r\n */\r\nasync function changePage(\r\n    { state }: { state?: { template?: string | null } },\r\n    link: HTMLAnchorElement | null = null\r\n): Promise<void> {\r\n    const previousTemplate = FLOW_CORE.previousTemplate || '*'\r\n    const previousURL = FLOW_CORE.previousURL || getCurrentURL()\r\n    const targetTemplate = state?.template || '*'\r\n    const targetURL = getCurrentURL()\r\n\r\n    const from: TransitionInEvent['from'] = {\r\n        view: getView(document),\r\n        template: previousTemplate,\r\n        url: previousURL,\r\n    }\r\n\r\n    FLOW_CORE.state = 'out'\r\n\r\n    const { transition, transitionKey } = findTransition(previousTemplate, targetTemplate)\r\n\r\n    const OUT: ITransitionOutEventConstructor = {\r\n        from,\r\n        to: {\r\n            template: targetTemplate,\r\n            url: targetURL,\r\n        },\r\n        link,\r\n        transitionKey,\r\n        container: getContainer(document),\r\n    }\r\n\r\n    window.dispatchEvent(new TransitionOutEvent(OUT))\r\n\r\n    fetchPage(getCurrentURL())\r\n        .then(async (html) => {\r\n            await transition.out(OUT)\r\n\r\n            const BASE_IN_END: ITransitionEndEventConstructor = {\r\n                from,\r\n                to: null,\r\n                link,\r\n                transitionKey,\r\n                container: getContainer(document),\r\n                error: null,\r\n            }\r\n\r\n            if (!html) {\r\n                console.error('No page founded')\r\n                FLOW_CORE.state = 'error'\r\n                window.dispatchEvent(\r\n                    new TransitionEndEvent({\r\n                        ...BASE_IN_END,\r\n                        error: 'No page founded',\r\n                    })\r\n                )\r\n                return void 0\r\n            }\r\n\r\n            const newDocument: Document = getParsedHTML(html).cloneNode(true) as Document\r\n\r\n            const IN: ITransitionInEventConstructor = {\r\n                ...BASE_IN_END,\r\n                to: {\r\n                    document: newDocument,\r\n                    container: getContainer(newDocument),\r\n                    view: getView(newDocument),\r\n                    template: targetTemplate,\r\n                    url: getCurrentURL(),\r\n                },\r\n            }\r\n\r\n            try {\r\n                updateDOMForInTransitionPage(newDocument, document)\r\n            } catch (err: any) {\r\n                FLOW_CORE.state = 'error'\r\n\r\n                window.dispatchEvent(\r\n                    new TransitionEndEvent({\r\n                        ...IN,\r\n                        error: err,\r\n                    })\r\n                )\r\n\r\n                return void 0\r\n            }\r\n\r\n            FLOW_CORE.state = 'in'\r\n            window.dispatchEvent(new TransitionInEvent(IN))\r\n            await transition.in(IN)\r\n\r\n            deleteOldContent(document)\r\n\r\n            FLOW_CORE.state = 'end'\r\n            window.dispatchEvent(\r\n                new TransitionEndEvent({\r\n                    ...IN,\r\n                    error: null,\r\n                })\r\n            )\r\n\r\n            FLOW_CORE.previousTemplate = getTemplateName(document)\r\n            FLOW_CORE.previousURL = targetURL\r\n\r\n            selectLinksAndAddEvents()\r\n            rerunScripts()\r\n\r\n            return void 0\r\n        })\r\n        .catch((err) => {\r\n            FLOW_CORE.state = 'error'\r\n\r\n            window.dispatchEvent(\r\n                new TransitionEndEvent({\r\n                    ...OUT,\r\n                    to: {\r\n                        ...OUT.to,\r\n                        view: null,\r\n                    },\r\n                    error: err,\r\n                })\r\n            )\r\n\r\n            console.error(err)\r\n            return void 0\r\n        })\r\n}\r\n\r\n/**\r\n * With previous && target template\r\n * Find the transition && transition key\r\n * @param  {string} previousTemplate\r\n * @param  {string} targetTemplate\r\n * @returns {transitionKey: TransitionType, transition: ITransition}\r\n */\r\nexport function findTransition(\r\n    previousTemplate: string,\r\n    targetTemplate: string\r\n): { transitionKey: TransitionType; transition: ITransition } {\r\n    const possibleTransitions: TransitionType[] = constructPossibleTransitions(\r\n        previousTemplate,\r\n        targetTemplate\r\n    )\r\n\r\n    const reducedMotion: boolean = !!window?.matchMedia?.('(prefers-reduced-motion: reduce)')\r\n        .matches\r\n\r\n    const defaultKey: TransitionType = `* <=> *${reducedMotion ? ' (reduced)' : ''}`\r\n\r\n    const transitionKey =\r\n        possibleTransitions.find((transition) => {\r\n            return FLOW_CORE.transitions.get(transition)\r\n        }) || defaultKey\r\n\r\n    const transition: ITransition =\r\n        transitionKey && FLOW_CORE.transitions.has(transitionKey)\r\n            ? (FLOW_CORE.transitions.get(transitionKey) as ITransition)\r\n            : FLOW_CORE.transitions.has(defaultKey)\r\n            ? (FLOW_CORE.transitions.get(defaultKey) as ITransition)\r\n            : reducedMotion\r\n            ? DEFAULT_TRANSITION_REDUCED\r\n            : DEFAULT_TRANSITION\r\n\r\n    return {\r\n        transitionKey,\r\n        transition,\r\n    }\r\n}\r\n\r\n/**\r\n * if the URL is correct, load the page and cache the request in case of user want to return in the page\r\n * @param  {URL|null} url\r\n * @returns Promise<Response>\r\n */\r\nasync function fetchPage(url: URL | null): Promise<string> {\r\n    return new Promise<string>(async (resolve, reject) => {\r\n        if (!url) return reject()\r\n        if (CACHE.has(url.href)) {\r\n            const page = CACHE.get(url.href) as string\r\n            const bytes = new TextEncoder().encode(page).length\r\n\r\n            window.dispatchEvent(\r\n                new LoadingProgressEvent({\r\n                    progress: 1,\r\n                    cache: true,\r\n                    done: true,\r\n                    fullBytesLength: bytes,\r\n                    bytesReceived: bytes,\r\n                })\r\n            )\r\n            return resolve(page)\r\n        }\r\n        if (FETCHING.has(url.href)) {\r\n            try {\r\n                await FETCHING.get(url.href)\r\n                return resolve(CACHE.get(url.href) as string)\r\n            } catch (err) {\r\n                return reject(err)\r\n            }\r\n        }\r\n\r\n        try {\r\n            FETCHING.set(\r\n                url.href,\r\n                fetch(url.href, {\r\n                    mode: 'same-origin',\r\n                    method: 'GET',\r\n                    headers: { 'X-Requested-With': 'self-navigation', 'X-flow': '1' },\r\n                    credentials: 'same-origin',\r\n                })\r\n                    .then(fetchProgress)\r\n                    // Transform the previous stream to Response to get the data\r\n                    .then((stream) => {\r\n                        if (stream instanceof Response) return stream\r\n\r\n                        return new Response(stream, {\r\n                            headers: { 'Content-Type': 'text/html' },\r\n                        })\r\n                    })\r\n            )\r\n\r\n            const response = await FETCHING.get(url.href)\r\n            if (!response) throw new Error()\r\n\r\n            const content = await response.text()\r\n\r\n            FETCHING.delete(url.href)\r\n\r\n            if (response.status >= 200 && response.status < 300) {\r\n                CACHE.set(url.href, content)\r\n            } else {\r\n                return reject({ status: response.status })\r\n            }\r\n\r\n            return resolve(content)\r\n        } catch (err) {\r\n            FETCHING.delete(url.href)\r\n            clearCacheForUrl(url)\r\n            return reject(err)\r\n        }\r\n    })\r\n}\r\n\r\n/**\r\n * If there is links in the var\r\n * Clear the event of click/mouseenter on it\r\n * Then select all links in the page and add the event of click and mouseenter\r\n */\r\nfunction selectLinksAndAddEvents() {\r\n    LINKS.forEach((link) => {\r\n        link.removeEventListener('click', clickLink(link))\r\n        link.removeEventListener('mouseenter', prefetchLink(link))\r\n        link.removeEventListener('focus', prefetchLink(link))\r\n    })\r\n\r\n    LINKS.length = 0\r\n\r\n    getNavigationLinks(document).forEach((link) => {\r\n        LINKS.push(link)\r\n    })\r\n\r\n    if (LINKS?.length) {\r\n        LINKS.forEach((link) => {\r\n            link.addEventListener('click', clickLink(link))\r\n            link.addEventListener('mouseenter', prefetchLink(link))\r\n            link.addEventListener('focus', prefetchLink(link))\r\n        })\r\n    }\r\n}\r\n\r\n/**\r\n * Search in the current page the template name\r\n * and replace in history the state param with template\r\n * to do the transition if go back/forward\r\n */\r\nfunction updateHistoryWithCurrentTemplate() {\r\n    const currentURL = getCurrentURL()\r\n    const currentTemplate = getTemplateName(document)\r\n    history?.replaceState?.({ template: currentTemplate }, '', currentURL?.href)\r\n}\r\n\r\n/**\r\n * Send an event to show the progress of a fetch request\r\n * @param  {Response} res\r\n * @returns ReadableStream\r\n */\r\nfunction fetchProgress(res: Response): ReadableStream<ArrayBufferView> | Response {\r\n    if (!(res.status >= 200 && res.status < 300)) {\r\n        return res\r\n    }\r\n\r\n    // Get the stream of the request\r\n    const reader = res.body?.getReader()\r\n    // Get the number of bytes of the element\r\n    const fullBytesLength: number = parseInt(res.headers.get('Content-Length') || '0')\r\n\r\n    // Usefull to count how many bytes are downloaded\r\n    let bytesReceived: number = 0\r\n\r\n    // Take each emit chunk to emit progress in an event\r\n    return new ReadableStream({\r\n        start(controller: ReadableStreamController<ArrayBufferView>) {\r\n            function push() {\r\n                reader?.read().then(({ done, value }): void => {\r\n                    window.dispatchEvent(\r\n                        new LoadingProgressEvent({\r\n                            progress: fullBytesLength\r\n                                ? divide(bytesReceived, fullBytesLength)\r\n                                : done\r\n                                ? 1\r\n                                : 0,\r\n                            fullBytesLength: done ? bytesReceived : fullBytesLength,\r\n                            bytesReceived,\r\n                            cache: false,\r\n                            done,\r\n                        })\r\n                    )\r\n\r\n                    // If no more data close the controller\r\n                    if (done) {\r\n                        controller.close()\r\n                        return void 0\r\n                    }\r\n\r\n                    // Add the current data length received to the previous bytes length received\r\n                    bytesReceived += value?.length || 0\r\n\r\n                    // Get the data and send it to the browser via controller\r\n                    controller.enqueue(value)\r\n\r\n                    // Check chunks by logging to the console\r\n                    push()\r\n                })\r\n            }\r\n\r\n            // Check chunks by logging to the console\r\n            push()\r\n        },\r\n    })\r\n}\r\n","import { flowtypus } from './core'\r\n\r\nexport default (): ReturnType<typeof flowtypus> => {\r\n    const Flowtypus = flowtypus()\r\n\r\n    if (window) {\r\n        const flow = window as Window &\r\n            typeof globalThis & { flowtypus: ReturnType<typeof flowtypus> }\r\n        flow.flowtypus = Flowtypus\r\n    }\r\n\r\n    return Flowtypus\r\n}\r\n"],"names":["curry_1","curry","fn","minArgsLength","args","_minArgsLength","nextArgs","_args","add","require$$0","num1","num2","transpoline_1","transpoline","result","_check","require$$1","checkMethod","predicates","defaultResult","value","stopIfValue","checking","_and","_check_1","predicate1","predicate2","accumulator","current","and_1","_and_1","and","freeze_1","freeze","_reduce","require$$2","initialValue","array","arrayReducer","index","fullArray","object","keys","objectReducer","generator","generatorFirstIteration","generatorReducer","fnGenerator","iteration","reduce_1","_reduce_1","reduce","uncurry_1","uncurry","f","not_1","not","predicate","type_1","type","length_1","length","el","sameLength","el1","el2","el1Length","el2Length","notSameLength","sameLength_1","_isnt","is_1","require$$3","isnt_1","_isnt_1","isnt","objectIs_1","notSameLength_1","objectIs","objectToCompare","key","_is","arrayIs_1","_is_1","is","_arrayIs","arrayToCompare","checkArrayIs","_arrayIs_1","arrayIs","gatherArgs_1","gatherArgs","pipe_1","pipe","fns","compose_1","compose","constant_1","constant","v","_when","_defaultWhenElse","elseFn","arg","when_1","_when_1","when","_or","a","or_1","_or_1","or","isType_1","isType","typeToTest","element","isArray","isGenerator","isGeneratorFunction","isObject","isString","isNumber","isBoolean","isSymbol","isBigint","isFunction","isRegexp","isUndefined","isNull","reduceObject_1","reduceObject","_map","currentValue","acc","mapObject_1","_map_1","mapObject","deepFreeze_1","require$$4","deepFreeze","divide","numerator","denominator","_filter","filter_1","_filter_1","filter","filterObject_1","filterObject","flipArgs_1","flipArgs","arg1","arg2","identity_1","identity","isLength_1","isLength","lgt","map_1","map","memoize_1","memoize","cache","multiply","partial_1","partial","defaultArgs","_pick","obj","props","newObj","pick_1","_pick_1","pick","pickAll_1","pickAll","reverseArgs_1","reverseArgs","spreadArgs_1","spreadArgs","substract","whenElse_1","whenElse","exports","add_1","require$$5","require$$6","divide_1","require$$7","require$$8","require$$9","require$$10","require$$11","require$$12","require$$13","require$$14","require$$15","require$$16","require$$17","isType_2","require$$18","require$$19","require$$20","require$$21","multiply_1","require$$22","require$$23","require$$24","require$$25","require$$26","require$$27","require$$28","require$$29","require$$30","require$$31","require$$32","require$$33","require$$34","require$$35","substract_1","require$$36","require$$37","require$$38","require$$39","require$$40","DOM_PARSER","CONTAINER_ATTR","VIEW_ATTR","TARGET_TEMPLATE_ATTR","OLD_VIEW_ATTR","NEW_VIEW_ATTR","DISABLED_LINK_ATTR","SCRIPTS_RELOAD_ATTR","LINKS","CACHE","PRE_FETCHED","FETCHING","FLOW_CORE","DEFAULT_TRANSITION","params","animation","_a","DEFAULT_TRANSITION_REDUCED","compare","old","next","valueA","valueB","lessKey","moreKey","lessArr","response","i","limit","node","findedIndex","n","constructPossibleTransitions","currentTemplate","targetTemplate","replaceStart","reduced","transformToURL","url","origin","getCurrentURL","isURL","isSameOrigin","url1","url2","isSamePath","findTargetAnchor","getParsedHTML","html","getContainer","document","getView","getTemplateName","view","getTargetTemplateName","updateAttr","newELement","currentElement","attr","defaultValue","_b","updateLang","newDocument","currentDocument","newElement","mergeHead","currentHead","nextHead","missing","added","b","replaceAndRunScript","setNewContent","fullContainer","currentContent","newContent","deleteOldContent","doc","todoRemove","newView","getNavigationLinks","dom","link","getScriptsToReload","headScripts","bodyScripts","oldScript","newScript","attrs","name","prefetchUrl","linkEl","updateDOMForInTransitionPage","LoadingProgressEvent","detail","__publicField","TransitionOutEvent","init","TransitionInEvent","TransitionEndEvent","clearAllCache","clearCacheForUrl","setTransition","transitionOut","transitionIn","reducedMotion","transitionKey","k","goToPage","template","event","currentURL","changePage","rerunScripts","flowtypus","selectLinksAndAddEvents","updateHistoryWithCurrentTemplate","clickLink","aURL","prefetchLink","state","previousTemplate","previousURL","targetURL","from","transition","findTransition","OUT","fetchPage","BASE_IN_END","IN","err","possibleTransitions","defaultKey","resolve","reject","page","bytes","fetchProgress","stream","content","res","reader","fullBytesLength","bytesReceived","controller","push","done","Flowtypus","flow"],"mappings":";;;;AACA,OAAO,eAAeA,GAAS,cAAc,EAAE,OAAO,GAAI,CAAE;AAc5D,SAASC,GAAMC,GAAIC,GAAeC,IAAO,CAAA,GAAI;AACzC,QAAMC,IAAiBF,KAAgC;AACvD,SAAO,YAAmBG,GAAU;AAChC,UAAMC,IAAQ,CAAC,GAAGH,GAAM,GAAGE,CAAQ;AACnC,WAAIJ,EAAG,SAASK,EAAM,UAAU,KAAKA,EAAM,UAAUF,IAC1CH,EAAG,GAAGK,CAAK,IAEfN,GAAMC,GAAIC,GAAeI,CAAK;AAAA,EAC7C;AACA;AACeP,EAAA,UAAGC;ACxBlB,OAAO,eAAeO,IAAS,cAAc,EAAE,OAAO,GAAI,CAAE;AAC5D,MAAMR,KAAUS;AAUhBD,GAAA,cAAsBR,GAAQ,SAAS,SAAaU,GAAMC,GAAM;AAC5D,SAAOD,IAAOC;AAClB,CAAC;;ACbD,OAAO,eAAeC,GAAS,cAAc,EAAE,OAAO,GAAI,CAAE;AAiC5D,SAASC,GAAYX,GAAI;AACrB,SAAO,YAAyBE,GAAM;AAElC,aADIU,IAASZ,EAAG,GAAGE,CAAI,GAChBU,aAAkB;AACrB,MAAAA,IAASA,EAAM;AAEnB,WAAOA;AAAA,EACf;AACA;AACeF,EAAA,UAAGC;AC1ClB,OAAO,eAAeE,GAAS,cAAc,EAAE,OAAO,GAAI,CAAE;AAC5D,MAAMH,KAAgBH,GAChBT,KAAUgB;AAqBDD,EAAA,cAAOf,GAAQ,SAAS,SAAeiB,GAAaC,GAAYC,GAAeC,GAAOC,GAAa;AAC9G,QAAMC,IAAW,CAACL,GAAaC,GAAYC,GAAeC,GAAOC,IAAc,SACvE,CAACH,KAAc,CAACA,EAAW,UAAUC,MAAkBE,IAChDF,IACJ,MACIG,EAASL,GAAaC,EAAW,MAAM,CAAC,GAAGD,EAAYE,GAAeD,EAAW,GAAGE,CAAK,CAAC,GAAGA,GAAOC,CAAW;AAG9H,aAAWT,GAAc,SAASU,CAAQ,EAAEL,GAAaC,GAAYC,GAAeC,GAAOC,CAAW;AAC1G,CAAC;AChCD,OAAO,eAAeE,IAAS,cAAc,EAAE,OAAO,GAAI,CAAE;AAC5D,MAAMvB,KAAUS,GACVe,KAAWR;AACjBO,GAAA,cAAsBvB,GAAQ,SAAS,SAAayB,GAAYC,GAAYN,GAAO;AAC/E,aAAWI,GAAS,SAAS,CAACG,GAAaC,MAAYD,KAAeC,GAAS,CAACH,GAAYC,CAAU,GAAG,IAAMN,GAAO,EAAK;AAC/H,CAAC;ACLD,OAAO,eAAeS,IAAS,cAAc,EAAE,OAAO,GAAI,CAAE;AAC5D,MAAMC,KAASrB;AACf,SAASsB,MAAO3B,GAAM;AAClB,aAAW0B,GAAO,SAAS,GAAG1B,CAAI;AACtC;AACeyB,GAAA,UAAGE;;ACLlB,OAAO,eAAeC,GAAS,cAAc,EAAE,OAAO,GAAI,CAAE;AAY5D,SAASC,GAAOb,GAAO;AACnB,SAAO,OAAO,OAAOA,CAAK;AAC9B;AACeY,EAAA,UAAGC;ACflB,OAAO,eAAeC,GAAS,cAAc,EAAE,OAAO,GAAI,CAAE;AAC5DA,EAAA,mBAAgDA,EAAA,iCAA0B;AAC1E,MAAMF,KAAWvB,GACXG,KAAgBI,GAChBhB,KAAUmC;AAChBD,EAAA,mBAA2BlC,GAAQ,SAAS,SAAqBE,GAAIkC,GAAcC,GAAO;AACtF,MAAI,CAACA,KAASA,EAAM,WAAW;AAC3B,WAAOD;AACX,WAASE,EAAaX,GAAaY,GAAOC,GAAW;AACjD,WAAID,KAASC,EAAU,SACZb,IACJ,MACIW,EAAapC,EAAGyB,GAAaa,EAAUD,IAAQA,OAAWP,GAAS,SAASQ,CAAS,CAAC,GAAGD,IAAQ,GAAGC,CAAS;AAAA,EAE3H;AACD,aAAW5B,GAAc,SAAS0B,CAAY,EAAEF,MAAiB,SAAYA,IAAeC,EAAM,IAAID,MAAiB,SAAY,IAAI,GAAGC,CAAK;AACnJ,CAAC;AACDH,EAAA,oBAA4BlC,GAAQ,SAAS,SAAsBE,GAAIkC,GAAcK,GAAQ;AACzF,QAAMC,IAAO,OAAO,KAAKD,CAAM;AAC/B,MAAI,CAACA,KAAUC,EAAK,WAAW;AAC3B,WAAON;AACX,WAASO,EAAchB,GAAaY,GAAOG,GAAMD,GAAQ;AACrD,WAAIF,KAASG,EAAK,SACPf,IACJ,MACIgB,EAAczC,EAAGyB,GAAac,EAAOC,EAAKH,KAASG,EAAKH,QAAYP,GAAS,SAASS,CAAM,CAAC,GAAGF,IAAQ,GAAGG,GAAMD,CAAM;AAAA,EAErI;AACD,aAAW7B,GAAc,SAAS+B,CAAa,EAAEP,MAAiB,SAAYA,IAAeK,EAAOC,EAAK,KAAKN,MAAiB,SAAY,IAAI,GAAGM,GAAMD,CAAM;AAClK,CAAC;AACDP,EAAA,uBAA+BlC,GAAQ,SAAS,SAAyBE,GAAIkC,GAAcQ,GAAW;AAClG,MAAI,CAACA;AACD,WAAOR;AACX,MAAIA,MAAiB,QAAW;AAC5B,UAAMS,IAA0BD,EAAU;AAC1C,QAAIC,EAAwB;AACxB,aAAOT;AACX,IAAAA,IAAeS,EAAwB;AAAA,EAC1C;AACD,WAASC,EAAiBnB,GAAaoB,GAAa;AAChD,UAAMC,IAAYD,EAAY;AAC9B,WAAIC,EAAU,OACHrB,IACJ,MACImB,EAAiB5C,EAAGyB,GAAaqB,EAAU,KAAK,GAAGD,CAAW;AAAA,EAE5E;AACD,aAAWnC,GAAc,SAASkC,CAAgB,EAAEV,GAAcQ,CAAS;AAC/E,CAAC;AChDD,OAAO,eAAeK,GAAS,cAAc,EAAE,OAAO,GAAI,CAAE;AAC5D,MAAMC,KAAYzC;AAClB,SAAS0C,MAAU/C,GAAM;AACrB,aAAW8C,GAAU,cAAc,GAAG9C,CAAI;AAC9C;AACe6C,EAAA,UAAGE;ACLlB,OAAO,eAAeC,GAAS,cAAc,EAAE,OAAO,GAAI,CAAE;AAC5D,MAAMH,KAAWxC;AAgBjB,SAAS4C,GAAQnD,GAAI;AACjB,SAAO,YAAsBE,GAAM;AAC/B,eAAW6C,GAAS,SAAS,CAACK,GAAG1B,GAASW,MAClCA,MAAUnC,EAAK,SAAS,IACjBkD,EAAE,GAAG,GAAGA,EAAE,IAAI1B,CAAO,IAE5B0B,EAAE,GAAG,WAAW,CAAC,GAAGA,EAAE,IAAI1B,CAAO,EAAE,SAC5B,CAAC0B,EAAE,GAAG,GAAGA,EAAE,IAAI1B,CAAO,GAAG,CAAA,CAAE,IAE/B,CAAC0B,EAAE,IAAI,CAAC,GAAGA,EAAE,IAAI1B,CAAO,CAAC,GACjC,CAAC1B,GAAI,EAAE,GAAGE,CAAI;AAAA,EACzB;AACA;AACegD,EAAA,UAAGC;AC9BlB,OAAO,eAAeE,GAAS,cAAc,EAAE,OAAO,GAAI,CAAE;AAC5D,MAAMH,KAAY3C;AAalB,SAAS+C,GAAIC,GAAW;AACpB,SAAO,YAAoBrD,GAAM;AAE7B,WAAO,KADegD,GAAU,SAASK,CAAS,EAChC,GAAGrD,CAAI;AAAA,EACjC;AACA;AACemD,EAAA,UAAGC;;ACpBlB,OAAO,eAAeE,GAAS,cAAc,EAAE,OAAO,GAAI,CAAE;AAmB5D,SAASC,GAAKvC,GAAO;AACjB,SAAIA,MAAU,OACH,SACPA,MAAU,SACH,cACJ,OAAO,UAAU,SAAS,KAAKA,CAAK,EAAE,MAAM,GAAG,EAAE,EAAE,YAAW;AACzE;AACesC,EAAA,UAAGC;AC1BlB,OAAO,eAAeC,GAAS,cAAc,EAAE,OAAO,GAAI,CAAE;AAC5D,MAAMF,KAASjD;AAmCf,SAASoD,GAAOC,GAAI;AAChB,cAAYJ,GAAO,SAASI,CAAE,GAAC;AAAA,IAC3B,KAAK;AAAA,IACL,KAAK;AAAA,IACL,KAAK;AACD,aAAOA,EAAG;AAAA,IACd,KAAK;AACD,aAAO,OAAO,KAAKA,CAAE,EAAE;AAAA,IAC3B,KAAK;AACD,aAAOA,EAAG,SAAU,EAAC;AAAA,IACzB;AACI,aAAO;AAAA,EACd;AACL;AACeF,EAAA,UAAGC;AClDlB,OAAO,eAAeE,GAAS,cAAc,EAAE,OAAO,GAAI,CAAE;AAC5D,MAAMH,KAAWnD,GACXT,KAAUgB;AAiBhB+C,EAAA,cAAsB/D,GAAQ,SAAS,SAAoBgE,GAAKC,GAAK;AACjE,QAAMC,QAAgBN,GAAS,SAASI,CAAG,GACrCG,QAAgBP,GAAS,SAASK,CAAG;AAC3C,SAAIC,MAAc,QAAQC,MAAc,OAC7B,KACJD,MAAcC;AACzB,CAAC;ACzBD,OAAO,eAAeC,GAAS,cAAc,EAAE,OAAO,GAAI,CAAE;AAC5D,MAAMb,KAAQ9C,GACR4D,KAAerD;AAIrBoD,EAAA,cAAsBb,GAAM,SAASc,GAAa,OAAO;;;;;UCNzD,OAAO,eAAeC,GAAS,cAAc,EAAE,OAAO,GAAI,CAAE;AAC5D,QAAMf,IAAQ9C,GACR8D,IAAOvD,MACPhB,IAAUmC,GACViB,IAAYoB;AAClB,SAAAF,EAAA,cAAsBtE,EAAQ,SAAS,SAAcgE,GAAKC,GAAK;AAC3D,eAAWV,EAAM,aAAaH,EAAU,SAASmB,EAAK,OAAO,CAAC,EAAEP,GAAKC,CAAG;AAAA,EAC5E,CAAC;;;;;;UCPD,OAAO,eAAeQ,GAAS,cAAc,EAAE,OAAO,GAAI,CAAE;AAC5D,QAAMC,IAAUjE;AAChB,WAASkE,KAAQvE,GAAM;AACnB,eAAWsE,EAAQ,SAAS,GAAGtE,CAAI;AAAA,EACtC;AACcqE,SAAAA,EAAA,UAAGE;;;;;;UCLlB,OAAO,eAAeC,GAAS,cAAc,EAAE,OAAO,GAAI,CAAE;AAC5D,QAAM5E,IAAUS,GACVoE,IAAkB7D,GAClByD,IAAStC,MAsBT2C,QAAe9E,EAAQ,SAAS,SAAkByC,GAAQsC,GAAiB;AAC7E,YAAQF,EAAgB,SAASpC,GAAQsC,CAAe;AACpD,aAAO;AACX,QAAItC,MAAWsC;AACX,aAAO;AACX,UAAMrC,IAAO,OAAO,KAAKD,CAAM;AAC/B,aAASuC,KAAOtC;AACZ,UAAI,EAAEsC,KAAOD,UACLN,EAAO,SAAShC,EAAOuC,IAAMD,EAAgBC,EAAI;AACrD,eAAO;AAGf,WAAO;AAAA,EACX,CAAC;AACcJ,SAAAA,EAAA,UAAGE;;;;;;UCvClB,OAAO,eAAeG,GAAS,cAAc,EAAE,OAAO,GAAI,CAAE;AAC5D,QAAMjF,IAAUS,GACViD,IAAS1C,GACTkE,IAAY/C,MACZyC,IAAaJ;AACnB,SAAAS,EAAA,cAAsBjF,EAAQ,SAAS,SAAYgE,GAAKC,GAAK;AACzD,YAAQP,EAAO,SAASM,CAAG,UAAUN,EAAO,SAASO,CAAG;AACpD,aAAO;AACX,gBAAYP,EAAO,SAASM,CAAG,GAAC;AAAA,MAC5B,KAAK;AACD,mBAAWkB,EAAU,SAASlB,GAAKC,CAAG;AAAA,MAC1C,KAAK;AACD,mBAAWW,EAAW,SAASZ,GAAKC,CAAG;AAAA,MAC3C,KAAK;AAAA,MACL,KAAK;AACD,eAAOD,EAAI,SAAQ,MAAOC,EAAI,SAAQ;AAAA,MAC1C;AACI,eAAOD,MAAQC;AAAA,IACtB;AAAA,EACL,CAAC;;;;;;UCnBD,OAAO,eAAeM,GAAS,cAAc,EAAE,OAAO,GAAI,CAAE;AAC5D,QAAMY,IAAQ1E;AACd,WAAS2E,KAAMhF,GAAM;AACjB,eAAW+E,EAAM,SAAS,GAAG/E,CAAI;AAAA,EACpC;AACcmE,SAAAA,EAAA,UAAGa;;;;;;UCLlB,OAAO,eAAeC,GAAS,cAAc,EAAE,OAAO,GAAI,CAAE;AAC5D,QAAMrF,IAAUS,GACVoE,IAAkB7D,GAClBuD,IAAOpC,MACPvB,IAAgB4D;AACtB,SAAAa,EAAA,cAAsBrF,EAAQ,SAAS,SAAiBqC,GAAOiD,GAAgB;AAC3E,YAAQT,EAAgB,SAASxC,GAAOiD,CAAc;AAClD,aAAO;AACX,QAAIjD,MAAUiD;AACV,aAAO;AACX,UAAMC,IAAe,CAACzE,IAAS,IAAMyB,IAAQ,MACpCzB,IAEDyB,MAAUF,EAAM,SACTvB,IACJ,MACIyE,MAAiBhB,EAAK,SAASlC,EAAME,IAAQ+C,EAAe/C,EAAM,GAAGA,IAAQ,CAAC,IAJ9E;AAOf,eAAW3B,EAAc,SAAS2E,CAAY,EAAC;AAAA,EACnD,CAAC;;;;;;UCpBD,OAAO,eAAeL,GAAS,cAAc,EAAE,OAAO,GAAI,CAAE;AAC5D,QAAMM,IAAa/E;AACnB,WAASgF,KAAWrF,GAAM;AACtB,eAAWoF,EAAW,SAAS,GAAGpF,CAAI;AAAA,EACzC;AACc8E,SAAAA,EAAA,UAAGO;;;ACLlB,OAAO,eAAeC,IAAS,cAAc,EAAE,OAAO,GAAI,CAAE;AAe5D,SAASC,GAAWzF,GAAI;AACpB,SAAO,SAAgBE,GAAM;AACzB,WAAIA,KAAQA,EAAK,SACNF,EAAG,GAAGE,CAAI,IAGVF,EAAE;AAAA,EAErB;AACA;AACewF,GAAA,UAAGC;ACzBlB,OAAO,eAAeC,IAAS,cAAc,EAAE,OAAO,GAAI,CAAE;AAC5D,MAAMF,KAAejF,IACfwC,KAAWjC;AAkBjB,SAAS6E,MAAQC,GAAK;AAClB,SAAO,YAAkB1F,GAAM;AAC3B,WAAA0F,EAAI,SAASJ,GAAa,SAASI,EAAI,EAAE,OAC9B7C,GAAS,SAAS,SAAiBtB,GAAazB,GAAI;AAC3D,aAAOA,EAAGyB,CAAW;AAAA,IACjC,GAAWvB,GAAM0F,KAAO,CAAA,CAAE;AAAA,EAC1B;AACA;AACeF,GAAA,UAAGC;AC5BlB,OAAO,eAAeE,IAAS,cAAc,EAAE,OAAO,GAAI,CAAE;AAC5D,MAAMH,KAASnF;AAiBf,SAASuF,MAAWF,GAAK;AACrB,aAAWF,GAAO,SAAS,GAAGE,EAAI,QAAS,CAAA;AAC/C;AACeC,GAAA,UAAGC;;ACrBlB,OAAO,eAAeC,IAAS,cAAc,EAAE,OAAO,GAAI,CAAE;AAU5D,SAASC,GAASC,GAAG;AACjB,SAAO,WAAiB;AACpB,WAAOA;AAAA,EACf;AACA;AACeF,GAAA,UAAGC;;ACflB,OAAO,eAAeE,GAAS,cAAc,EAAE,OAAO,GAAI,CAAE;AAC5DA,EAAA,YAAoBA,EAAA,QAAgB;AACpC,MAAMpG,KAAUS;AAChB2F,EAAA,YAAoBpG,GAAQ,SAAS,SAAcyD,GAAWvD,GAAI;AAC9D,SAAOmG,GAAiB5C,GAAWvD,CAAE;AACzC,CAAC;AACDkG,EAAA,gBAAwBpG,GAAQ,SAAS,SAAkByD,GAAWvD,GAAIoG,GAAQ;AAC9E,SAAOD,GAAiB5C,GAAWvD,GAAIoG,CAAM;AACjD,CAAC;AACD,SAASD,GAAiB5C,GAAWvD,GAAIoG,GAAQ;AAC7C,SAAO,SAAqBC,GAAK;AAC7B,WAAI9C,EAAU8C,CAAG,IACNrG,EAAGqG,CAAG,IAERD,IACEA,EAAOC,CAAG,IAEdA;AAAA,EACf;AACA;ACnBA,OAAO,eAAeC,IAAS,cAAc,EAAE,OAAO,GAAI,CAAE;AAC5D,MAAMC,KAAUhG;AAChB,SAASiG,MAAQtG,GAAM;AACnB,aAAWqG,GAAQ,OAAO,GAAGrG,CAAI;AACrC;AACeoG,GAAA,UAAGE;;ACLlB,OAAO,eAAeC,IAAS,cAAc,EAAE,OAAO,GAAI,CAAE;AAC5D,MAAM3G,KAAUS,GACVe,KAAWR;AACjB2F,GAAA,cAAsB3G,GAAQ,SAAS,SAAYyB,GAAYC,GAAYN,GAAO;AAC9E,aAAWI,GAAS,SAAS,CAACoF,GAAGT,MAAMS,KAAKT,GAAG,CAAC1E,GAAYC,CAAU,GAAG,IAAON,GAAO,EAAI;AAC/F,CAAC;ACLD,OAAO,eAAeyF,IAAS,cAAc,EAAE,OAAO,GAAI,CAAE;AAC5D,MAAMC,KAAQrG;AACd,SAASsG,MAAM3G,GAAM;AACjB,aAAW0G,GAAM,SAAS,GAAG1G,CAAI;AACrC;AACeyG,GAAA,UAAGE;;ACLlB,OAAO,eAAeC,GAAS,cAAc,EAAE,OAAO,GAAI,CAAE;AAC9CA,EAAA,SAAsBA,EAAA,cAAmBA,EAAA,WAAqBA,EAAA,aAAmBA,EAAA,WAAmBA,EAAA,WAAoBA,EAAA,YAAmBA,EAAA,WAAmBA,EAAA,WAAmBA,EAAA,WAA8BA,EAAA,sBAAsBA,EAAA,cAAkBA,EAAA,UAAG;AACxQ,MAAMtD,KAASjD,GACTT,KAAUgB,GAOViG,QAAajH,GAAQ,SAAS,SAAgBkH,GAAYC,GAAS;AACrE,aAAWzD,GAAO,SAASyD,CAAO,MAAMD;AAC5C,CAAC;AACcF,EAAA,UAAGC;AAClB,SAASG,GAAQD,GAAS;AACtB,SAAOF,EAAO,SAASE,CAAO;AAClC;AACeH,EAAA,UAAGI;AAClB,SAASC,GAAYF,GAAS;AAC1B,SAAOF,EAAO,aAAaE,CAAO;AACtC;AACmBH,EAAA,cAAGK;AACtB,SAASC,GAAoBH,GAAS;AAClC,SAAOF,EAAO,qBAAqBE,CAAO;AAC9C;AAC2BH,EAAA,sBAAGM;AAC9B,SAASC,GAASJ,GAAS;AACvB,SAAOF,EAAO,UAAUE,CAAO;AACnC;AACgBH,EAAA,WAAGO;AACnB,SAASC,GAASL,GAAS;AACvB,SAAOF,EAAO,UAAUE,CAAO;AACnC;AACgBH,EAAA,WAAGQ;AACnB,SAASC,GAASN,GAAS;AACvB,SAAOF,EAAO,UAAUE,CAAO;AACnC;AACgBH,EAAA,WAAGS;AACnB,SAASC,GAAUP,GAAS;AACxB,SAAOF,EAAO,WAAWE,CAAO;AACpC;AACiBH,EAAA,YAAGU;AACpB,SAASC,GAASR,GAAS;AACvB,SAAOF,EAAO,UAAUE,CAAO;AACnC;AACgBH,EAAA,WAAGW;AACnB,SAASC,GAAST,GAAS;AACvB,SAAOF,EAAO,UAAUE,CAAO;AACnC;AACgBH,EAAA,WAAGY;AACnB,SAASC,GAAWV,GAAS;AACzB,SAAOF,EAAO,YAAYE,CAAO;AACrC;AACkBH,EAAA,aAAGa;AACrB,SAASC,GAASX,GAAS;AACvB,SAAOF,EAAO,UAAUE,CAAO;AACnC;AACgBH,EAAA,WAAGc;AACnB,SAASC,GAAYZ,GAAS;AAC1B,SAAOF,EAAO,aAAaE,CAAO;AACtC;AACmBH,EAAA,cAAGe;AACtB,SAASC,GAAOb,GAAS;AACrB,SAAOF,EAAO,QAAQE,CAAO;AACjC;AACcH,EAAA,SAAGgB;;ACjEjB,OAAO,eAAeC,GAAS,cAAc,EAAE,OAAO,GAAI,CAAE;AAC5D,MAAM/E,KAAYzC;AAClB,SAASyH,MAAgB9H,GAAM;AAC3B,aAAW8C,GAAU,eAAe,GAAG9C,CAAI;AAC/C;AACe6H,EAAA,UAAGC;ACLlB,OAAO,eAAeC,GAAS,cAAc,EAAE,OAAO,GAAI,CAAE;AAC5DA,EAAA,aAAqBA,EAAA,YAAoB;AACzC,MAAMlF,KAAWxC,GACXwH,KAAiBjH,GACjBhB,KAAUmC;AAChBgG,EAAA,gBAAwBnI,GAAQ,SAAS,SAAkBE,GAAIiH,GAAS;AACpE,SAAI,CAACA,KAAWA,EAAQ,WAAW,IACxB,SACAlE,GAAS,SAAS,SAAqBtB,GAAayG,GAAc7F,GAAO4E,GAAS;AACzF,WAAO,CAAC,GAAGxF,GAAazB,EAAGkI,GAAc7F,GAAO4E,CAAO,CAAC;AAAA,EAChE,GAAO,CAAA,GAAIA,CAAO;AAClB,CAAC;AACDgB,EAAA,iBAAyBnI,GAAQ,SAAS,SAAmBE,GAAIiH,GAAS;AACtE,MAAI,CAACA;AACD,WAAO;AACX,QAAMzE,IAAO,OAAO,KAAKyE,CAAO;AAChC,SAAIzE,EAAK,WAAW,IACT,SACAuF,GAAe,SAAS,SAAsBtG,GAAaC,GAASoD,GAAKvC,GAAQ;AACxF,WAAO,OAAO,OAAO,OAAO,OAAO,CAAA,GAAId,CAAW,GAAG,EAAE,CAACqD,IAAM9E,EAAG0B,GAASoD,GAAKvC,CAAM,EAAG,CAAA;AAAA,EAC3F,OAAMQ,GAAS,SAAS,SAA6BoF,GAAKrD,GAAK;AAAE,WAAO,OAAO,OAAO,OAAO,OAAO,CAAE,GAAEqD,CAAG,GAAG,EAAE,CAACrD,IAAM,OAAS,CAAE;AAAA,EAAE,GAAI,CAAE,GAAEtC,CAAI,GAAGyE,CAAO;AAC/J,CAAC;ACrBD,OAAO,eAAemB,IAAS,cAAc,EAAE,OAAO,GAAI,CAAE;AAC5D,MAAMC,KAAS9H;AACf,SAAS+H,MAAapI,GAAM;AACxB,aAAWmI,GAAO,YAAY,GAAGnI,CAAI;AACzC;AACekI,GAAA,UAAGE;ACLlB,OAAO,eAAeC,IAAS,cAAc,EAAE,OAAO,GAAI,CAAE;AAC5D,MAAMzG,KAAWvB,GACX+F,KAASxF,IACT6F,KAAO1E,IACP6E,KAAWxC,GACX8D,KAAcI;AAWpB,SAASC,GAAWvH,GAAO;AACvB,aAAWY,GAAS,aAAasG,GAAY,aAAa9B,GAAO,aAAaK,GAAK,SAASG,GAAS,SAASA,GAAS,QAAQ,GAAGhF,GAAS,OAAO,GAAGZ,CAAK,CAAC;AAC/J;AACeqH,GAAA,UAAGE;;ACnBlB,OAAO,eAAeC,IAAS,cAAc,EAAE,OAAO,GAAI,CAAE;AAC5D,MAAM5I,KAAUS;AAShBmI,GAAA,cAAsB5I,GAAQ,SAAS,SAAgB6I,GAAWC,GAAa;AAC3E,MAAIA,MAAgB;AAChB,UAAM,IAAI,MAAM,qBAAsB;AAC1C,SAAOD,IAAYC;AACvB,CAAC;;ACdD,OAAO,eAAeC,GAAS,cAAc,EAAE,OAAO,GAAI,CAAE;AAC5DA,EAAA,gBAAwBA,EAAA,eAAuB;AAC/C,MAAM9F,KAAWxC,GACXwH,KAAiBjH,GACjBhB,KAAUmC;AAChB4G,EAAA,mBAA2B/I,GAAQ,SAAS,SAAqBE,GAAImC,GAAO;AACxE,aAAWY,GAAS,SAAS,SAA4BtB,GAAaC,GAASW,GAAOF,GAAO;AACzF,WAAInC,EAAG0B,GAASW,GAAOF,CAAK,IACjB,CAAC,GAAGV,GAAaC,CAAO,IAE5BD;AAAA,EACf,GAAO,CAAA,GAAIU,CAAK;AAChB,CAAC;AACD0G,EAAA,oBAA4B/I,GAAQ,SAAS,SAAsBE,GAAIuC,GAAQ;AAC3E,aAAWwF,GAAe,SAAS,SAA6BtG,GAAaC,GAASoD,GAAKvC,GAAQ;AAC/F,WAAIvC,EAAG0B,GAASoD,GAAKvC,CAAM,IAChB,OAAO,OAAO,OAAO,OAAO,CAAA,GAAId,CAAW,GAAG,EAAE,CAACqD,IAAMvC,EAAOuC,GAAM,CAAA,IAExErD;AAAA,EACf,GAAO,CAAA,GAAIc,CAAM;AACjB,CAAC;ACpBD,OAAO,eAAeuG,IAAS,cAAc,EAAE,OAAO,GAAI,CAAE;AAC5D,MAAMC,KAAYxI;AAClB,SAASyI,MAAU9I,GAAM;AACrB,aAAW6I,GAAU,cAAc,GAAG7I,CAAI;AAC9C;AACe4I,GAAA,UAAGE;;ACLlB,OAAO,eAAeC,IAAS,cAAc,EAAE,OAAO,GAAI,CAAE;AAC5D,MAAMF,KAAYxI;AAClB,SAAS2I,MAAgBhJ,GAAM;AAC3B,aAAW6I,GAAU,eAAe,GAAG7I,CAAI;AAC/C;AACe+I,GAAA,UAAGC;;ACLlB,OAAO,eAAeC,IAAS,cAAc,EAAE,OAAO,GAAI,CAAE;AAe5D,SAASC,GAASpJ,GAAI;AAClB,SAAO,SAAiBqJ,GAAMC,MAASpJ,GAAM;AACzC,WAAOF,EAAGsJ,GAAMD,GAAM,GAAGnJ,CAAI;AAAA,EACrC;AACA;AACeiJ,GAAA,UAAGC;;ACpBlB,OAAO,eAAeG,IAAS,cAAc,EAAE,OAAO,GAAI,CAAE;AAS5D,SAASC,GAASvD,GAAG;AACjB,SAAOA;AACX;AACesD,GAAA,UAAGC;;ACZlB,OAAO,eAAeC,IAAS,cAAc,EAAE,OAAO,GAAI,CAAE;AAC5D,MAAM3J,KAAUS,GACVmD,KAAW5C,GAaX4I,SAAe5J,GAAQ,SAAS,SAAkB6J,GAAK/F,GAAI;AAC7D,aAAWF,GAAS,SAASE,CAAE,MAAM+F;AACzC,CAAC;AACcF,GAAA,UAAGC;;AClBlB,OAAO,eAAeE,IAAS,cAAc,EAAE,OAAO,GAAI,CAAE;AAC5D,MAAMvB,KAAS9H;AACf,SAASsJ,MAAO3J,GAAM;AAClB,aAAWmI,GAAO,WAAW,GAAGnI,CAAI;AACxC;AACe0J,GAAA,UAAGC;;ACLlB,OAAO,eAAeC,IAAS,cAAc,EAAE,OAAO,GAAI,CAAE;AAC5D,MAAMzF,KAAO9D,GAAA;AAgBb,SAASwJ,GAAQ/J,GAAI;AACjB,MAAIgK,IAAQ,CAAA;AACZ,SAAO,YAAqB9J,GAAM;AAC9B,UAAMsC,IAAO,OAAO,KAAKwH,CAAK;AAC9B,aAASlF,KAAOtC;AACZ,cAAQ6B,GAAK,SAAS2F,EAAMlF,GAAK,MAAM5E,CAAI;AACvC,eAAO8J,EAAMlF,GAAK;AAG1B,WAAAkF,IAAQ,OAAO,OAAO,OAAO,OAAO,CAAA,GAAIA,CAAK,GAAG,EAAE,CAACxH,EAAK,OAAO,SAAQ,IAAK;AAAA,MACpE,MAAMtC;AAAA,MACN,OAAOF,EAAG,GAAGE,CAAI;AAAA,IACpB,EAAA,CAAE,GACA8J,EAAMxH,EAAK,OAAO,SAAU,GAAE;AAAA,EAC7C;AACA;AACesH,GAAA,UAAGC;;ACjClB,OAAO,eAAeE,IAAS,cAAc,EAAE,OAAO,GAAI,CAAE;AAC5D,MAAMnK,KAAUS;AAShB0J,GAAA,cAAsBnK,GAAQ,SAAS,SAAkBU,GAAMC,GAAM;AACjE,SAAOD,IAAOC;AAClB,CAAC;;ACZD,OAAO,eAAeyJ,IAAS,cAAc,EAAE,OAAO,GAAI,CAAE;AAY5D,SAASC,GAAQnK,MAAOoK,GAAa;AACjC,SAAO,YAAyBlK,GAAM;AAClC,WAAOF,EAAG,GAAGoK,GAAa,GAAGlK,CAAI;AAAA,EACzC;AACA;AACegK,GAAA,UAAGC;;ACjBlB,OAAO,eAAeE,IAAS,cAAc,EAAE,OAAO,GAAI,CAAE;AAC5D,MAAMvK,KAAUS;AAChB8J,GAAA,cAAsBvK,GAAQ,SAAS,SAAcwK,GAAKC,IAAQ,IAAI;AAClE,MAAIC,IAAS,CAAA;AACb,WAAS1F,KAAOyF;AACZ,IAAAC,EAAO1F,KAAOwF,EAAIxF;AAEtB,SAAO0F;AACX,CAAC;ACRD,OAAO,eAAeC,IAAS,cAAc,EAAE,OAAO,GAAI,CAAE;AAC5D,MAAMC,KAAUnK;AAChB,SAASoK,MAAQzK,GAAM;AACnB,aAAWwK,GAAQ,SAAS,GAAGxK,CAAI;AACvC;AACeuK,GAAA,UAAGE;;ACLlB,OAAO,eAAeC,IAAS,cAAc,EAAE,OAAO,GAAI,CAAE;AAW5D,SAASC,GAAQP,GAAK;AAClB,SAAO,OAAO,OAAO,CAAE,GAAEA,CAAG;AAChC;AACeM,GAAA,UAAGC;;ACdlB,OAAO,eAAeC,IAAS,cAAc,EAAE,OAAO,GAAI,CAAE;AAgB5D,SAASC,GAAY/K,GAAI;AACrB,SAAO,YAAqBE,GAAM;AAC9B,WAAOF,EAAG,GAAGE,EAAK,QAAS,CAAA;AAAA,EACnC;AACA;AACe4K,GAAA,UAAGC;;ACrBlB,OAAO,eAAeC,IAAS,cAAc,EAAE,OAAO,GAAI,CAAE;AAC5D,SAASC,GAAWjL,GAAI;AACpB,SAAO,YAAmBE,GAAM;AAC5B,WAAIA,EAAK,SACEF,EAAGE,CAAI,IAGPF,EAAE;AAAA,EAErB;AACA;AACegL,GAAA,UAAGC;;ACXlB,OAAO,eAAeC,IAAS,cAAc,EAAE,OAAO,GAAI,CAAE;AAC5D,MAAMpL,KAAUS;AAUhB2K,GAAA,cAAsBpL,GAAQ,SAAS,SAAmBU,GAAMC,GAAM;AAClE,SAAOD,IAAOC;AAClB,CAAC;;ACbD,OAAO,eAAe0K,IAAS,cAAc,EAAE,OAAO,GAAI,CAAE;AAC5D,MAAM5E,KAAUhG;AAChB,SAAS6K,MAAYlL,GAAM;AACvB,aAAWqG,GAAQ,WAAW,GAAGrG,CAAI;AACzC;AACeiL,GAAA,UAAGC;AAAA;ACJlB,SAAO,eAAcC,GAAU,cAAc,EAAE,OAAO,GAAI,CAAE,GAC5DA,EAAoB,YAAAA,EAAA,aAAqBA,eAAqBA,EAAsB,cAAAA,EAAA,eAAuBA,WAAiBA,EAAe,OAAAA,EAAA,UAAkBA,EAAe,OAAAA,EAAA,UAAkBA,EAAa,KAAAA,EAAA,WAAmBA,kBAAwBA,EAAc,MAAAA,EAAA,WAAmBA,EAAkB,UAAAA,EAAA,YAAoBA,EAAc,MAAAA,EAAA,SAAiBA,WAAiBA,EAAsB,cAAAA,EAAA,WAAmBA,EAAqB,aAAAA,EAAA,WAAmBA,EAAmB,WAAAA,EAAA,YAAoBA,aAAmBA,EAAmB,WAAAA,EAAA,WAAmBA,EAA8B,sBAAAA,EAAA,cAAsBA,EAAkB,UAAAA,EAAA,SAAiBA,SAAeA,EAAmB,WAAAA,EAAA,KAAaA,EAAmB,WAAAA,EAAA,aAAqBA,EAAiB,SAAAA,EAAA,WAAmBA,iBAAuBA,EAAiB,SAAAA,EAAA,SAAiBA,EAAqB,aAAAA,EAAA,QAAgBA,EAAmB,WAAAA,EAAA,UAAkBA,YAAkBA,EAAc,MAAAA,EAAA,MAAc,QACj6BA,EAAA,WAAmBA,EAAe,OAAAA,EAAA,OAAeA,EAAsB,cAAA;AACvE,QAAMC,IAAQ/K;AACd,EAAA8K,EAAc,MAAAC,EAAM;AACpB,QAAM3J,IAAQb;AACd,EAAAuK,EAAc,MAAA1J,EAAM;AACpB,QAAMqD,IAAY/C;AAClB,EAAAoJ,EAAkB,UAAArG,EAAU;AAC5B,QAAMa,IAAYvB;AAClB,EAAA+G,EAAkB,UAAAxF,EAAU;AAC5B,QAAME,IAAayC;AACnB,EAAA6C,EAAmB,WAAAtF,EAAW;AAC9B,QAAMjG,IAAUyL;AAChB,EAAAF,EAAgB,QAAAvL,EAAQ;AACxB,QAAMyI,IAAeiD;AACrB,EAAAH,EAAqB,aAAA9C,EAAa;AAClC,QAAMkD,IAAWC;AACjB,EAAAL,EAAiB,SAAAI,EAAS;AAC1B,QAAM3C,IAAW6C;AACjB,EAAAN,EAAiB,SAAAvC,EAAS;AAC1B,QAAMG,IAAiB2C;AACvB,EAAAP,EAAuB,eAAApC,EAAe;AACtC,QAAME,IAAa0C;AACnB,EAAAR,EAAmB,WAAAlC,EAAW;AAC9B,QAAMrH,IAAWgK;AACjB,EAAAT,EAAiB,SAAAvJ,EAAS;AAC1B,QAAM0D,IAAeuG;AACrB,EAAAV,EAAqB,aAAA7F,EAAa;AAClC,QAAM+D,KAAayC;AACnB,EAAAX,EAAmB,WAAA9B,GAAW;AAC9B,QAAMlF,KAAO4H;AACb,EAAAZ,EAAa,KAAAhH,GAAK;AAClB,QAAMoF,KAAayC;AACnB,EAAAb,EAAmB,WAAA5B,GAAW;AAC9B,QAAMlF,KAAS4H;AACf,EAAAd,EAAe,OAAA9G,GAAO;AACtB,QAAMuC,KAAWsF;AACjB,EAAAf,EAAiB,SAAAvE,GAAS;AAC1B,QAAMuF,IAAWD;AACjB,SAAO,eAAef,GAAS,WAAW,EAAE,YAAY,IAAM,KAAK,WAAY;AAAE,WAAOgB,EAAS;AAAA,EAAQ,EAAI,CAAA,GAC7G,OAAO,eAAehB,GAAS,eAAe,EAAE,YAAY,IAAM,KAAK,WAAY;AAAE,WAAOgB,EAAS;AAAA,EAAY,EAAI,CAAA,GACrH,OAAO,eAAehB,GAAS,uBAAuB,EAAE,YAAY,IAAM,KAAK,WAAY;AAAE,WAAOgB,EAAS;AAAA,EAAoB,EAAI,CAAA,GACrI,OAAO,eAAehB,GAAS,YAAY,EAAE,YAAY,IAAM,KAAK,WAAY;AAAE,WAAOgB,EAAS;AAAA,EAAS,EAAI,CAAA,GAC/G,OAAO,eAAehB,GAAS,YAAY,EAAE,YAAY,IAAM,KAAK,WAAY;AAAE,WAAOgB,EAAS;AAAA,EAAS,EAAI,CAAA,GAC/G,OAAO,eAAehB,GAAS,YAAY,EAAE,YAAY,IAAM,KAAK,WAAY;AAAE,WAAOgB,EAAS;AAAA,EAAS,EAAI,CAAA,GAC/G,OAAO,eAAehB,GAAS,aAAa,EAAE,YAAY,IAAM,KAAK,WAAY;AAAE,WAAOgB,EAAS;AAAA,EAAU,EAAI,CAAA,GACjH,OAAO,eAAehB,GAAS,YAAY,EAAE,YAAY,IAAM,KAAK,WAAY;AAAE,WAAOgB,EAAS;AAAA,EAAS,EAAI,CAAA,GAC/G,OAAO,eAAehB,GAAS,YAAY,EAAE,YAAY,IAAM,KAAK,WAAY;AAAE,WAAOgB,EAAS;AAAA,EAAS,EAAI,CAAA,GAC/G,OAAO,eAAehB,GAAS,cAAc,EAAE,YAAY,IAAM,KAAK,WAAY;AAAE,WAAOgB,EAAS;AAAA,EAAW,EAAI,CAAA,GACnH,OAAO,eAAehB,GAAS,YAAY,EAAE,YAAY,IAAM,KAAK,WAAY;AAAE,WAAOgB,EAAS;AAAA,EAAS,EAAI,CAAA,GAC/G,OAAO,eAAehB,GAAS,eAAe,EAAE,YAAY,IAAM,KAAK,WAAY;AAAE,WAAOgB,EAAS;AAAA,EAAY,EAAI,CAAA,GACrH,OAAO,eAAehB,GAAS,UAAU,EAAE,YAAY,IAAM,KAAK,WAAY;AAAE,WAAOgB,EAAS;AAAA,EAAO,EAAI,CAAA;AAC3G,QAAM3I,KAAW4I;AACjB,EAAAjB,EAAiB,SAAA3H,GAAS;AAC1B,QAAMkG,KAAQ2C;AACd,EAAAlB,EAAc,MAAAzB,GAAM;AACpB,QAAMxB,KAAcoE;AACpB,EAAAnB,EAAoB,YAAAjD,GAAY;AAChC,QAAM0B,KAAY2C;AAClB,EAAApB,EAAkB,UAAAvB,GAAU;AAC5B,QAAM4C,KAAaC;AACnB,EAAAtB,EAAmB,WAAAqB,GAAW;AAC9B,QAAMrJ,KAAQuJ;AACd,EAAAvB,EAAc,MAAAhI,GAAM;AACpB,QAAMsB,KAAkBkI;AACxB,EAAAxB,EAAwB,gBAAA1G,GAAgB;AACxC,QAAMD,KAAaoI;AACnB,EAAAzB,EAAmB,WAAA3G,GAAW;AAC9B,QAAMiC,KAAOoG;AACb,EAAA1B,EAAa,KAAA1E,GAAK;AAClB,QAAMuD,KAAY8C;AAClB,EAAA3B,EAAkB,UAAAnB,GAAU;AAC5B,QAAMO,KAASwC;AACf,EAAA5B,EAAe,OAAAZ,GAAO;AACtB,QAAMG,KAAYsC;AAClB,EAAA7B,EAAkB,UAAAT,GAAU;AAC5B,QAAMlF,KAASyH;AACf,EAAA9B,EAAe,OAAA3F,GAAO;AACtB,QAAM3C,KAAWqK;AACjB,EAAA/B,EAAiB,SAAAtI,GAAS;AAC1B,QAAMgF,KAAiBsF;AACvB,EAAAhC,EAAuB,eAAAtD,GAAe;AACtC,QAAM+C,KAAgBwC;AACtB,EAAAjC,EAAsB,cAAAP,GAAc;AACpC,QAAM3G,KAAeoJ;AACrB,EAAAlC,EAAqB,aAAAlH,GAAa;AAClC,QAAM6G,KAAewC;AACrB,EAAAnC,EAAqB,aAAAL,GAAa;AAClC,QAAMyC,KAAcC;AACpB,EAAArC,EAAoB,YAAAoC,GAAY;AAChC,QAAM/M,KAAgBiN;AACtB,EAAAtC,EAAsB,cAAA3K,GAAc;AACpC,QAAM8C,KAASoK;AACf,EAAAvC,EAAe,OAAA7H,GAAO;AACtB,QAAM8C,KAASuH;AACf,EAAAxC,EAAe,OAAA/E,GAAO;AACtB,QAAM6E,KAAa2C;AACnB,EAAAzC,EAAmB,WAAAF,GAAW;;AC9FjB,MAAA4C,KAAwB,IAAI,OAAO,aAMnCC,KAA6C,4BAQ7CC,KAAmC,uBAMnCC,KACT,kCAMSC,KAA2C,2BAM3CC,KAA2C,2BAM3CC,KAAgD,2BAMhDC,KAA+C,yBAK/CC,IAA6B,CAAA,GAU7BC,wBAAiC,OAMjCC,KAAwB,CAAA,GAKxBC,wBAA+C,OAS/CC,IAKT;AAAA,EACA,kBAAkB;AAAA,EAClB,iCAAiB,IAAI;AAAA,EACrB,OAAO;AAAA,EACP,aAAa;AACjB,GAKaC,KAAkC;AAAA,EAC3C,KAAK,OAAOC,MAAW;;AACnB,WAAO,SAAS;AAAA,MACZ,KAAK;AAAA,MACL,UAAU;AAAA,IAAA,CACb;AACD,UAAMC,KAAYC,IAAAF,EAAO,KAAK,SAAZ,gBAAAE,EAAkB,QAAQ,CAAC,EAAE,SAAS,EAAA,GAAK,EAAE,SAAS,EAAG,CAAA,GAAG;AAAA,MAC1E,UAAU;AAAA,MACV,YAAY;AAAA,MACZ,MAAM;AAAA,MACN,QAAQ;AAAA,IAAA;AAGZ,WAAAD,KAAA,QAAAA,EAAW,SACJA,KAAA,gBAAAA,EAAW,aAAY,QAAQ,QAAQ;AAAA,EAClD;AAAA,EACA,IAAI,OAAOD,MAAW;;AAClB,IAAIA,EAAO,KAAK,SAAaA,EAAA,KAAK,KAAK,MAAM,WAAW;AAExD,UAAMC,KAAYC,IAAAF,EAAO,GAAG,SAAV,gBAAAE,EAAgB,QAAQ,CAAC,EAAE,SAAS,EAAA,GAAK,EAAE,SAAS,EAAG,CAAA,GAAG;AAAA,MACxE,UAAU;AAAA,MACV,YAAY;AAAA,MACZ,MAAM;AAAA,MACN,QAAQ;AAAA,IAAA;AAGZ,WAAAD,KAAA,QAAAA,EAAW,SACJA,KAAA,gBAAAA,EAAW,aAAY,QAAQ,QAAQ;AAAA,EAClD;AACJ,GAKaE,KAA0C;AAAA,EACnD,KAAK,YACM,QAAQ;EAEnB,IAAI,YACO,QAAQ;AAEvB;ACrHgB,SAAAC,GACZC,GACAC,GACAnG,IAA4C,CAACoG,GAAWC,MAAcD,MAAWC,GAClD;AAC/B,EAAKH,MAAKA,IAAM,CAAA,IACXC,MAAMA,IAAO,CAAA;AAElB,QAAMG,IAA8BJ,EAAI,SAASC,EAAK,SAAS,UAAU,WACnEI,IAA8BD,MAAY,UAAU,YAAY,SAChEE,IAAUF,MAAY,UAAUH,IAAOD,GAEvCO,IAA4C;AAAA,IAC9C,SAASH,MAAY,UAAU,CAAC,GAAGJ,CAAG,IAAI,CAAC;AAAA,IAC3C,QAAQ,CAAC;AAAA,IACT,OAAOI,MAAY,YAAY,CAAC,GAAGH,CAAI,IAAI,CAAC;AAAA,EAAA;AAGhD,WAASO,IAAI,GAAGC,IAAQH,EAAQ,QAAQE,IAAIC,GAAOD,KAAK;AACpD,UAAME,IAAOJ,EAAQE,IACfG,IAAcJ,EAASF,GAAS,UAAU,CAACO,MAAM9G,EAAO8G,GAAGF,CAAI,CAAC;AAEtE,IAAIC,MAAgB,KACPJ,EAAAH,GAAS,KAAKM,CAAI,KAElBH,EAAA,OAAU,KAAKG,CAAI,GACnBH,EAAAF,GAAS,OAAOM,GAAa,CAAC;AAAA,EAE/C;AAEO,SAAAJ;AACX;AASO,SAASM,EACZC,GACAC,GACAC,IAAwB,IACR;;AAChB,EAAKF,MAAmCA,IAAA,MACnCC,MAAiCA,IAAA;AAEhC,QAAAE,KAAoBpB,IAAA,iCAAQ,eAAR,QAAAA,EAAA,aAAqB,oCAAoC,UAC7E,eACA,IAEAU,IAA6B;AAAA,IAC/B,GAAGO,QAAsBC,IAAiBE;AAAA,IAC1C,GAAGF,QAAqBD,IAAkBG;AAAA,IAC1C,GAAGH,SAAuBC,IAAiBE;AAAA,EAAA;AAG/C,SAAIH,MAAoBC,KACpBR,EAAS,KAAK,GAAGQ,SAAsBD,IAAkBG,GAAS,GAGlEF,MAAmB,OAAOC,KAC1BT,EAAS,KAAK,GAAGM,EAA6BC,GAAiB,KAAK,EAAK,CAAC,GAE1EA,MAAoB,OAAOE,KAC3BT,EAAS,KAAK,GAAGM,EAA6B,KAAKE,GAAgB,EAAK,CAAC,GAEzED,MAAoB,OAAOC,MAAmB,OAAOC,KACrDT,EAAS,KAAK,GAAGM,EAA6B,KAAK,KAAK,EAAK,CAAC,GAG3DN;AACX;AC3FgB,SAAAW,EAAeC,GAA0BC,GAA6B;AAClF,MAAI,CAACD;AAAY,WAAA;AAEjB,MAAIA,aAAe;AAAY,WAAAA;AAE3B,MAAA;AACO,WAAA,IAAI,IAAIA,CAAG;AAAA;AAEd,QAAA;AACA,aAAO,IAAI,IAAIA,GAAKC,KAAU,OAAO,SAAS,IAAI;AAAA;AAE3C,aAAA;AAAA,IACX;AAAA,EACJ;AACJ;AAMO,SAASC,IAA4B;AACjC,SAAAH,EAAe,OAAO,SAAS,IAAI;AAC9C;AAOO,SAASI,EAAMH,GAAmC;AACrD,SAAOA,aAAe;AAC1B;AAQgB,SAAAI,GAAaC,GAA2BC,GAAoC;AACxF,SAAAD,IAAON,EAAeM,CAAI,GAC1BC,IAAOP,EAAeO,CAAI,GAEnBH,EAAME,CAAI,KAAKF,EAAMG,CAAI,KAAKD,EAAK,WAAWC,EAAK;AAC9D;AAQgB,SAAAC,GAAWF,GAA2BC,GAAoC;AACtF,SAAAD,IAAON,EAAeM,CAAI,GAC1BC,IAAOP,EAAeO,CAAI,GAGtBH,EAAME,CAAI,KAAKF,EAAMG,CAAI,KAAKD,EAAK,aAAaC,EAAK,YAAYD,EAAK,WAAWC,EAAK;AAE9F;AAOO,SAASE,GAAiBjN,GAAmD;AAChF,SAAKA,IACDA,EAAG,YAAY,MAAYA,IAC3BA,EAAG,gBAAsBiN,GAAiBjN,EAAG,aAAa,IACvD,OAHS;AAIpB;AC1DO,SAASkN,GAAcC,GAAmC;AAC7D,SAAIA,aAAgB,WAAiBA,IAC9BhD,GAAW;AAAA,IACd,OAAOgD,KAAS,WAAWA,IAAQA,EAAa,SAAS;AAAA,IACzD;AAAA,EAAA;AAER;AASO,SAASC,EAAaC,GAAwC;AAC7D,SAAA,CAACA,KAAY,EAAEA,aAAoB,YAAkB,OAClDA,EAAS,cAAc,IAAIjD,KAAiB,KAAK;AAC5D;AASO,SAASkD,EAAQD,GAAwC;;AAEvD,SAAA,MAAM,OAAKlC,IAAAiC,EAAaC,CAAQ,MAArB,gBAAAlC,EAAwB,aAAY,CAAE,CAAA,EAAE;AAAA,IAChD,CAACnL,MAAOA,EAAG,aAAaqK,EAAS,KAAK,CAACrK,EAAG,aAAauK,EAAa;AAAA,EAAA,EACtE,MAAsB;AAEhC;AAQO,SAASgD,GAAgBF,GAAmC;;AACzD,QAAAG,IAAOF,EAAQD,CAAQ;AACtB,WAAAlC,IAAAqC,KAAA,gBAAAA,EAAM,iBAAN,gBAAArC,EAAA,KAAAqC,GAAqBnD,QAAc;AAC9C;AAQO,SAASoD,GAAsBzN,GAAuC;AACrE,SAAA,CAACA,KAAM,EAAEA,aAAc,eAAqB,OAE5CA,EAAG,aAAasK,EAAoB,KAAUtK,EAAG,aAAasK,EAAoB,KAAK;AAE/F;AAUO,SAASoD,GACZC,GACAC,GACAC,GACAC,IAAuB,IACnB;;AAEA,EAAA,CAAC,CAACF,KACFA,EAAe,aAAaC,CAAI,QAAM1C,IAAAwC,KAAA,gBAAAA,EAAY,iBAAZ,gBAAAxC,EAAA,KAAAwC,GAA2BE,OAEjED,EAAe,aAAaC,KAAME,IAAAJ,KAAA,gBAAAA,EAAY,iBAAZ,gBAAAI,EAAA,KAAAJ,GAA2BE,OAASC,CAAY;AAE1F;AAQO,MAAME,KAAa7R,EAAAA,MAAM,SAC5B8R,GACAC,GACQ;AACF,QAAAN,IAA0BM,EAAgB,SAAS,IACnDC,IAAsBF,EAAY,SAAS;AAEtC,SAAAP,GAAAS,GAAYP,GAAgB,MAAM,GAClCF,GAAAS,GAAYP,GAAgB,OAAO,KAAK,GAE5CM;AACX,CAAC,GAUYE,KAAYjS,EAAAA,MAAM,SAC3B8R,GACAC,GACQ;AAER,QAAMG,IAAc,MAAM,KAAKH,EAAgB,KAAK,QAAQ,GAEtDI,IAAW,MAAM,KAAKL,EAAY,KAAK,QAAQ,GAG/C,EAAE,SAAAM,GAAS,OAAAC,EAAA,IAAUnD;AAAA,IAAQgD;AAAA,IAAaC;AAAA,IAAU,CAACxL,GAAY2L,MACnE3L,EAAE,YAAY2L,CAAC;AAAA,EAAA;AAInB,SAAAF,EAAQ,QAAQ,CAACvC,MAASA,EAAK,OAAQ,CAAA,GAEvBkC,EAAA,KAAK,OAAO,GAAGM,CAAK,GAEpCA,EACK,OAAO,CAACxO,MAAOA,EAAG,YAAY,QAAQ,EACtC,QAAQ,CAACA,MAA0B0O,GAAoB1O,CAAE,CAAC,GAExDkO;AACX,CAAC,GAQYS,KAAgBxS,EAAAA,MAAM,SAC/B8R,GACAC,GACQ;AACJ,MAAAU,IAAgBxB,EAAac,CAAe;AAEhD,MAAI,CAACU;AACD,UAAM,IAAI,MAAM,kCAAkCxE,KAAiB,GAAG;AAGtE,MAAAyE,IAAiBvB,EAAQY,CAAe,GACxCY,IAAaxB,EAAQW,CAAW;AAEpC,MAAI,CAACY;AAAsB,UAAA,IAAI,MAAM,wBAAwB;AACzD,MAAA,CAACA,KAAkB,CAACC;AAAkB,UAAA,IAAI,MAAM,YAAY;AAGrD,SAAAA,EAAA,aAAatE,IAAe,MAAM,GAC9BqE,EAAA,aAAatE,IAAe,MAAM,GAG7CsE,EAAe,cACDD,EAAA,aAAaE,GAAYD,EAAe,WAAW,IAEjED,EAAc,OAAOE,CAAU,GAG5BZ;AACX,CAAC;AAOM,SAASa,GAAiBC,GAAyB;AAEtD,QAAMC,IAAaD,EAAI,cAAc,IAAIzE,KAAgB;AACzD,EAAA0E,KAAA,QAAAA,EAAY;AAGZ,QAAMC,IAAUF,EAAI,cAAc,IAAIxE,KAAgB;AACtD,SAAA0E,KAAA,QAAAA,EAAS,gBAAgB1E,KAElBwE;AACX;AAUgB,SAAAG,GAAmBC,IAAgB,UAA+B;AAC9E,SAAO,MAAM;AAAA,IACTA,EAAI,iBAAiB,UAAU3E,uBAAuC;AAAA,EAAA,EACxE,OAAO,CAAC4E,MACDxC,GAAawC,EAAK,aAAa,MAAM,GAAG,OAAO,SAAS,IAAI,IAC5DA,EAAK,aAAa,QAAQ,IACxBA,EAAK,aAAa,QAAQ,MAAM,UADE,KADkC,EAG9E;AACL;AAQgB,SAAAC,GAAmBF,IAAgB,UAA+B;AAExE,QAAAG,IAA6CH,EAAI,KAAK;AAAA,IACxD,UAAU1E;AAAA,EAAA,GAGR8E,IAA6CJ,EAAI,KAAK;AAAA,IACxD,UAAU1E;AAAA,EAAA;AAGP,SAAA,CAAC,GAAG,MAAM,KAAK6E,CAAW,GAAG,GAAG,MAAM,KAAKC,CAAW,CAAC;AAClE;AAQO,SAASd,GAAoBe,GAAoC;AAC9D,QAAAC,IAAY,SAAS,cAAc,QAAQ,GAC3CC,IAAQ,MAAM,KAAKF,EAAU,UAAU;AAC7C,aAAW,EAAE,MAAAG,GAAM,OAAAtS,EAAM,KAAKqS;AAC1B,IAAAD,EAAUE,KAAQtS;AAEZ,EAAAoS,EAAA,OAAOD,EAAU,eAAe,EAAE,GAC5CA,EAAU,YAAYC,CAAS;AACnC;AAQgB,SAAAG,GAAYpD,GAA0B2C,IAAgB,UAAgB;AAGlF,MAFA3C,IAAMD,EAAeC,CAAG,GAEpB,EAACA,KAAA,QAAAA,EAAK,SAAQ5B,GAAY,QAAQ4B,EAAI,IAAI,MAAM;AAAW;AAEzD,QAAAqD,IAA0BV,EAAI,cAAc,MAAM;AACjD,EAAAU,EAAA,aAAa,OAAO,UAAU,GAC9BA,EAAA,aAAa,QAAQrD,EAAI,IAAI,GAC7BqD,EAAA,aAAa,MAAM,UAAU,GAEhCV,EAAA,KAAK,YAAYU,CAAM,GAEfjF,GAAA,KAAK4B,EAAI,IAAI;AAC7B;AAOO,MAAMsD,KAA+B5T,EAAAA,MAAM,SAC9C8R,GACAC,GACgB;AACT,SAAAnM,EAAA;AAAA,IACH4M,GAAcV,CAAW;AAAA,IACzBD,GAAWC,CAAW;AAAA,IACtBG,GAAUH,CAAW;AAAA,IACvBC,CAAe;AACrB,CAAC;AC/RM,MAAM8B,WAA6B,MAAM;AAAA,EAG5C,YAAYC,GAA0B;AAClC,UAAM,uBAAuB;AAHjC,IAAAC,EAAA;AAKI,SAAK,SAASD;AAAA,EAClB;AACJ;AAkBO,MAAME,WAA2B,MAAM;AAAA,EAO1C,YAAYC,GAAsC;AAC9C,UAAM,qBAAqB;AAP/B,IAAAF,EAAA;AACA,IAAAA,EAAA;AACA,IAAAA,EAAA;AACA,IAAAA,EAAA;AACA,IAAAA,EAAA;AAKI,SAAK,OAAOE,EAAK,MACjB,KAAK,KAAKA,EAAK,IACf,KAAK,OAAOA,EAAK,MACjB,KAAK,gBAAgBA,EAAK,eAC1B,KAAK,YAAYA,EAAK;AAAA,EAC1B;AACJ;AAUO,MAAMC,WAA0B,MAAM;AAAA,EAOzC,YAAYD,GAAqC;AAC7C,UAAM,oBAAoB;AAP9B,IAAAF,EAAA;AACA,IAAAA,EAAA;AACA,IAAAA,EAAA;AACA,IAAAA,EAAA;AACA,IAAAA,EAAA;AAKI,SAAK,OAAOE,EAAK,MACjB,KAAK,KAAKA,EAAK,IACf,KAAK,OAAOA,EAAK,MACjB,KAAK,gBAAgBA,EAAK,eAC1B,KAAK,YAAYA,EAAK;AAAA,EAC1B;AACJ;AAWO,MAAME,UAA2B,MAAM;AAAA,EAa1C,YAAYF,GAAsC;AAC9C,UAAM,qBAAqB;AAb/B,IAAAF,EAAA;AACA,IAAAA,EAAA;AAMA,IAAAA,EAAA;AACA,IAAAA,EAAA;AACA,IAAAA,EAAA;AACA,IAAAA,EAAA;AAKI,SAAK,OAAOE,EAAK,MACjB,KAAK,KAAKA,EAAK,IACf,KAAK,OAAOA,EAAK,MACjB,KAAK,gBAAgBA,EAAK,eAC1B,KAAK,YAAYA,EAAK,WACtB,KAAK,QAAQA,EAAK;AAAA,EACtB;AACJ;AC5DO,SAASG,KAAsB;AAClC,EAAA3F,EAAM,MAAM;AAChB;AAOO,SAAS4F,GAAiB/D,GAAmC;AAKhE,SAJAA,IAAMD,EAAeC,CAAG,GAEpB,CAACA,KAED,CAAC7B,EAAM,IAAI6B,EAAI,IAAI,IAAU,KAE1B7B,EAAM,OAAO6B,EAAI,IAAI;AAChC;AASO,SAASgE,GACZvP,GACAwP,GACAC,GACAC,IAAyB,IAC3B;AAEQ,QAAAC,IAAgC3P,EACjC,MAAM,GAAG,EACT,OAAO,CAAC4P,MAAM,CAAC,CAACA,CAAC,EACjB,OAAOF,IAAgB,CAAC,WAAW,IAAI,CAAA,CAAE,EACzC,KAAK,GAAG;AACH,EAAA7F,EAAA,YAAY,IAAI8F,GAAe;AAAA,IACrC,IAAIF;AAAA,IACJ,KAAKD;AAAA,EAAA,CACR;AACL;AAEAD,GAAc,WAAWzF,GAAmB,KAAKA,GAAmB,EAAE;AAEtEyF,GAAc,WAAWrF,GAA2B,KAAKA,GAA2B,IAAI,EAAI;AAY5E,SAAA2F,GACZtE,GACAuE,GACAC,GACO;;AAEP,MAAIlG,EAAU,UAAU,SAASA,EAAU,UAAU;AACjD,WAAIkG,KACAA,EAAM,eAAe,GAElB;AAGX,QAAMC,IAAavE;AAEnB,SAAKuE,KAED,OAAOzE,KAAQ,aAAUA,IAAMD,EAAeC,CAAG,IAGjD,CAAC,CAACA,KACFI,GAAaJ,GAAKyE,CAAU,MAC3BD,IAAQ,EAAEA,EAAM,WAAWA,EAAM,WAAW,OAEzCA,KACAA,EAAM,eAAe,GAGpBjE,GAAWP,GAAKyE,CAAU,OAC3B/F,IAAA,mCAAS,cAAT,QAAAA,EAAA,cAAqB,EAAE,UAAA6F,EAAA,GAAY,IAAIvE,EAAI,OAC3C0E;AAAA,IACI,EAAE,OAAO,EAAE,UAAAH,IAAW;AAAA,IACtBC,IAAQhE,GAAiBgE,KAAA,gBAAAA,EAAO,MAAqB,IAAI;AAAA,EAAA,IAI1D,OACA,CAAC,CAACxE,KAAO,CAACI,GAAaJ,GAAKyE,CAAU,MACtC,OAAA,SAAS,OAAOzE,EAAI,OAGxB,OA1BiB;AA2B5B;AAMO,SAAS2E,KAAqB;AACjCrP,EAAAA,EAAA,KAAKuN,IAAoBrJ,EAAA,IAAIyI,EAAmB,CAAC,EAAE,QAAQ;AAC/D;AAKO,SAAS2C,KASd;AACE,gBAAO,SAAS,MAAM;AACM,IAAAC,MACSC;EAAA,GAG9B,OAAA,iBAAiB,YAAYJ,EAAU,GACpCpG,EAAA,mBAAmBwC,GAAgB,QAAQ,GACrDxC,EAAU,cAAc4B,KAEjB;AAAA,IACH,MAAM,MAAM;;AACR,aAAK,YACLxB,IAAA,QAAQ,SAAR,QAAAA,EAAA,eACO,MAFc;AAAA,IAGzB;AAAA,IACA,eAAAoF;AAAA,IACA,kBAAAC;AAAA,IACA,SAAS,MAAM;;AACX,aAAK,YACLrF,IAAA,QAAQ,YAAR,QAAAA,EAAA,eACO,MAFc;AAAA,IAGzB;AAAA,IACA,UAAU,CAACsB,GAA0BuE,MAC1BD,GAAStE,GAAKuE,CAAQ;AAAA,IAEjC,aAAatC;AAAA,IACb,cAAA0C;AAAA,IACA,eAAAX;AAAA,EAAA;AAER;AAQA,SAASe,GAAUnC,GAAsD;AACrE,SAAO,CAAC4B,MAA4B;AAChC,QAAI,CAAC5B;AAAa;AAElB,UAAMoC,IAAOjF,EAAe6C,EAAK,aAAa,MAAM,CAAC,GAC/ChD,IAAgCoB,GAAsB4B,CAAI;AAEvD,IAAA0B,GAAAU,GAAMpF,GAAgB4E,CAAK;AAAA,EAAA;AAE5C;AAOA,SAASS,EAAarC,GAAqC;AACvD,SAAO,MAAY;AACf,IAAI,CAACA,MAELQ,GAAYR,EAAK,IAAI,GACrBA,EAAK,oBAAoB,cAAcqC,EAAarC,CAAI,CAAC,GACzDA,EAAK,oBAAoB,SAASqC,EAAarC,CAAI,CAAC;AAAA,EAAA;AAE5D;AASA,eAAe8B,GACX,EAAE,OAAAQ,KACFtC,IAAiC,MACpB;AACP,QAAAuC,IAAmB7G,EAAU,oBAAoB,KACjD8G,IAAc9G,EAAU,eAAe4B,EAAc,GACrDN,KAAiBsF,KAAA,gBAAAA,EAAO,aAAY,KACpCG,IAAYnF,KAEZoF,IAAkC;AAAA,IACpC,MAAMzE,EAAQ,QAAQ;AAAA,IACtB,UAAUsE;AAAA,IACV,KAAKC;AAAA,EAAA;AAGT,EAAA9G,EAAU,QAAQ;AAElB,QAAM,EAAE,YAAAiH,GAAY,eAAAnB,EAAA,IAAkBoB,GAAeL,GAAkBvF,CAAc,GAE/E6F,IAAsC;AAAA,IACxC,MAAAH;AAAA,IACA,IAAI;AAAA,MACA,UAAU1F;AAAA,MACV,KAAKyF;AAAA,IACT;AAAA,IACA,MAAAzC;AAAA,IACA,eAAAwB;AAAA,IACA,WAAWzD,EAAa,QAAQ;AAAA,EAAA;AAGpC,SAAO,cAAc,IAAI+C,GAAmB+B,CAAG,CAAC,GAEhDC,GAAUxF,EAAe,CAAA,EACpB,KAAK,OAAOQ,MAAS;AACZ,UAAA6E,EAAW,IAAIE,CAAG;AAExB,UAAME,IAA8C;AAAA,MAChD,MAAAL;AAAA,MACA,IAAI;AAAA,MACJ,MAAA1C;AAAA,MACA,eAAAwB;AAAA,MACA,WAAWzD,EAAa,QAAQ;AAAA,MAChC,OAAO;AAAA,IAAA;AAGX,QAAI,CAACD,GAAM;AACP,cAAQ,MAAM,iBAAiB,GAC/BpC,EAAU,QAAQ,SACX,OAAA;AAAA,QACH,IAAIuF,EAAmB;AAAA,UACnB,GAAG8B;AAAA,UACH,OAAO;AAAA,QAAA,CACV;AAAA,MAAA;AAEE;AAAA,IACX;AAEA,UAAMnE,IAAwBf,GAAcC,CAAI,EAAE,UAAU,EAAI,GAE1DkF,IAAoC;AAAA,MACtC,GAAGD;AAAA,MACH,IAAI;AAAA,QACA,UAAUnE;AAAA,QACV,WAAWb,EAAaa,CAAW;AAAA,QACnC,MAAMX,EAAQW,CAAW;AAAA,QACzB,UAAU5B;AAAA,QACV,KAAKM,EAAc;AAAA,MACvB;AAAA,IAAA;AAGA,QAAA;AACA,MAAAoD,GAA6B9B,GAAa,QAAQ;AAAA,aAC7CqE;AACL,MAAAvH,EAAU,QAAQ,SAEX,OAAA;AAAA,QACH,IAAIuF,EAAmB;AAAA,UACnB,GAAG+B;AAAA,UACH,OAAOC;AAAA,QAAA,CACV;AAAA,MAAA;AAGE;AAAA,IACX;AAEA,IAAAvH,EAAU,QAAQ,MAClB,OAAO,cAAc,IAAIsF,GAAkBgC,CAAE,CAAC,GACxC,MAAAL,EAAW,GAAGK,CAAE,GAEtBtD,GAAiB,QAAQ,GAEzBhE,EAAU,QAAQ,OACX,OAAA;AAAA,MACH,IAAIuF,EAAmB;AAAA,QACnB,GAAG+B;AAAA,QACH,OAAO;AAAA,MAAA,CACV;AAAA,IAAA,GAGKtH,EAAA,mBAAmBwC,GAAgB,QAAQ,GACrDxC,EAAU,cAAc+G,GAEAR,MACXF;EAEN,CACV,EACA,MAAM,CAACkB,MAAQ;AACZ,IAAAvH,EAAU,QAAQ,SAEX,OAAA;AAAA,MACH,IAAIuF,EAAmB;AAAA,QACnB,GAAG4B;AAAA,QACH,IAAI;AAAA,UACA,GAAGA,EAAI;AAAA,UACP,MAAM;AAAA,QACV;AAAA,QACA,OAAOI;AAAA,MAAA,CACV;AAAA,IAAA,GAGL,QAAQ,MAAMA,CAAG;AAAA,EACV,CACV;AACT;AASgB,SAAAL,GACZL,GACAvF,GAC0D;;AAC1D,QAAMkG,IAAwCpG;AAAA,IAC1CyF;AAAA,IACAvF;AAAA,EAAA,GAGEuE,IAAyB,CAAC,GAACzF,IAAA,iCAAQ,eAAR,QAAAA,EAAA,aAAqB,oCACjD,UAECqH,IAA6B,UAAU5B,IAAgB,eAAe,MAEtEC,IACF0B,EAAoB,KAAK,CAACP,MACfjH,EAAU,YAAY,IAAIiH,CAAU,CAC9C,KAAKQ,GAEJR,IACFnB,KAAiB9F,EAAU,YAAY,IAAI8F,CAAa,IACjD9F,EAAU,YAAY,IAAI8F,CAAa,IACxC9F,EAAU,YAAY,IAAIyH,CAAU,IACnCzH,EAAU,YAAY,IAAIyH,CAAU,IACrC5B,IACAxF,KACAJ;AAEH,SAAA;AAAA,IACH,eAAA6F;AAAA,IACA,YAAAmB;AAAA,EAAA;AAER;AAOA,eAAeG,GAAU1F,GAAkC;AACvD,SAAO,IAAI,QAAgB,OAAOgG,GAASC,MAAW;AAClD,QAAI,CAACjG;AAAK,aAAOiG,EAAO;AACxB,QAAI9H,EAAM,IAAI6B,EAAI,IAAI,GAAG;AACrB,YAAMkG,IAAO/H,EAAM,IAAI6B,EAAI,IAAI,GACzBmG,IAAQ,IAAI,YAAA,EAAc,OAAOD,CAAI,EAAE;AAEtC,oBAAA;AAAA,QACH,IAAI3C,GAAqB;AAAA,UACrB,UAAU;AAAA,UACV,OAAO;AAAA,UACP,MAAM;AAAA,UACN,iBAAiB4C;AAAA,UACjB,eAAeA;AAAA,QAAA,CAClB;AAAA,MAAA,GAEEH,EAAQE,CAAI;AAAA,IACvB;AACA,QAAI7H,EAAS,IAAI2B,EAAI,IAAI;AACjB,UAAA;AACM,qBAAA3B,EAAS,IAAI2B,EAAI,IAAI,GACpBgG,EAAQ7H,EAAM,IAAI6B,EAAI,IAAI,CAAW;AAAA,eACvC6F;AACL,eAAOI,EAAOJ,CAAG;AAAA,MACrB;AAGA,QAAA;AACS,MAAAxH,EAAA;AAAA,QACL2B,EAAI;AAAA,QACJ,MAAMA,EAAI,MAAM;AAAA,UACZ,MAAM;AAAA,UACN,QAAQ;AAAA,UACR,SAAS,EAAE,oBAAoB,mBAAmB,UAAU,IAAI;AAAA,UAChE,aAAa;AAAA,QAChB,CAAA,EACI,KAAKoG,EAAa,EAElB,KAAK,CAACC,MACCA,aAAkB,WAAiBA,IAEhC,IAAI,SAASA,GAAQ;AAAA,UACxB,SAAS,EAAE,gBAAgB,YAAY;AAAA,QAAA,CAC1C,CACJ;AAAA,MAAA;AAGT,YAAMjH,IAAW,MAAMf,EAAS,IAAI2B,EAAI,IAAI;AAC5C,UAAI,CAACZ;AAAU,cAAM,IAAI,MAAM;AAEzB,YAAAkH,IAAU,MAAMlH,EAAS;AAI/B,UAFSf,EAAA,OAAO2B,EAAI,IAAI,GAEpBZ,EAAS,UAAU,OAAOA,EAAS,SAAS;AACtC,QAAAjB,EAAA,IAAI6B,EAAI,MAAMsG,CAAO;AAAA;AAE3B,eAAOL,EAAO,EAAE,QAAQ7G,EAAS,OAAQ,CAAA;AAG7C,aAAO4G,EAAQM,CAAO;AAAA,aACjBT;AACI,aAAAxH,EAAA,OAAO2B,EAAI,IAAI,GACxB+D,GAAiB/D,CAAG,GACbiG,EAAOJ,CAAG;AAAA,IACrB;AAAA,EAAA,CACH;AACL;AAOA,SAAShB,KAA0B;AACzB,EAAA3G,EAAA,QAAQ,CAAC0E,MAAS;AACpB,IAAAA,EAAK,oBAAoB,SAASmC,GAAUnC,CAAI,CAAC,GACjDA,EAAK,oBAAoB,cAAcqC,EAAarC,CAAI,CAAC,GACzDA,EAAK,oBAAoB,SAASqC,EAAarC,CAAI,CAAC;AAAA,EAAA,CACvD,GAED1E,EAAM,SAAS,GAEfwE,GAAmB,QAAQ,EAAE,QAAQ,CAACE,MAAS;AAC3C,IAAA1E,EAAM,KAAK0E,CAAI;AAAA,EAAA,CAClB,GAEG1E,KAAA,QAAAA,EAAO,UACDA,EAAA,QAAQ,CAAC0E,MAAS;AACpB,IAAAA,EAAK,iBAAiB,SAASmC,GAAUnC,CAAI,CAAC,GAC9CA,EAAK,iBAAiB,cAAcqC,EAAarC,CAAI,CAAC,GACtDA,EAAK,iBAAiB,SAASqC,EAAarC,CAAI,CAAC;AAAA,EAAA,CACpD;AAET;AAOA,SAASkC,KAAmC;;AACxC,QAAML,IAAavE,KACbP,IAAkBmB,GAAgB,QAAQ;AAChD,GAAApC,IAAA,mCAAS,iBAAT,QAAAA,EAAA,cAAwB,EAAE,UAAUiB,EAAmB,GAAA,IAAI8E,KAAA,gBAAAA,EAAY;AAC3E;AAOA,SAAS2B,GAAcG,GAA2D;;AAC9E,MAAI,EAAEA,EAAI,UAAU,OAAOA,EAAI,SAAS;AAC7B,WAAAA;AAIL,QAAAC,KAAS9H,IAAA6H,EAAI,SAAJ,gBAAA7H,EAAU,aAEnB+H,IAA0B,SAASF,EAAI,QAAQ,IAAI,gBAAgB,KAAK,GAAG;AAGjF,MAAIG,IAAwB;AAG5B,SAAO,IAAI,eAAe;AAAA,IACtB,MAAMC,GAAuD;AACzD,eAASC,IAAO;AACZ,QAAAJ,KAAA,QAAAA,EAAQ,OAAO,KAAK,CAAC,EAAE,MAAAK,GAAM,OAAAhW,QAAkB;AAgB3C,cAfO,OAAA;AAAA,YACH,IAAI0S,GAAqB;AAAA,cACrB,UAAUkD,IACJpO,SAAOqO,GAAeD,CAAe,IACrCI,IACA,IACA;AAAA,cACN,iBAAiBA,IAAOH,IAAgBD;AAAA,cACxC,eAAAC;AAAA,cACA,OAAO;AAAA,cACP,MAAAG;AAAA,YAAA,CACH;AAAA,UAAA,GAIDA,GAAM;AACN,YAAAF,EAAW,MAAM;AACV;AAAA,UACX;AAGA,UAAAD,MAAiB7V,KAAA,gBAAAA,EAAO,WAAU,GAGlC8V,EAAW,QAAQ9V,CAAK,GAGnB+V;QAAA;AAAA,MAEb;AAGK,MAAAA;IACT;AAAA,EAAA,CACH;AACL;AClkBA,MAAAhC,KAAe,MAAoC;AAC/C,QAAMkC,IAAYlC;AAElB,MAAI,QAAQ;AACR,UAAMmC,IAAO;AAEb,IAAAA,EAAK,YAAYD;AAAA,EACrB;AAEO,SAAAA;AACX;"}